/**
 * guidePlugin - v1.0.0 - 14:20:17 30-11-2020
 * Author: cuongtt
 */

!function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],r):r(t.EventPlayerCore,t.vcReact)}(this,function(e,t){"use strict";var r,n,o,i,u,l,a="default"in e?e.default:e,c="default"in t?t.default:t,s=(function(){function e(e){this.value=e}function t(t){function r(o,i){try{var u=t[o](i),l=u.value;l instanceof e?Promise.resolve(l.value).then(function(e){r("next",e)},function(e){r("throw",e)}):n(u.done?"return":"normal",u.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?r(o.key,o.arg):i=null}var o,i;this._invoke=function(e,t){return new Promise(function(n,u){var l={key:e,arg:t,resolve:n,reject:u,next:null};i?i=i.next=l:(o=i=l,r(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},h=(o=n=function(e){function t(){var e,r,n,o;s(this,t);for(var i=arguments.length,u=Array(i),l=0;l<i;l++)u[l]=arguments[l];return r=n=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={is_show:!1},o=r,v(n,o)}return y(t,e),p(t,[{key:"componentDidMount",value:function(){this.props.player.on("fullscreenchange",this.showGuildOnFullscreen)}},{key:"componentWillUnmount",value:function(){this.props.player.off("fullscreenchange",this.showGuildOnFullscreen)}},{key:"showGuildOnFullscreen",value:function(){var e=this.props.player;document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(this.setState({is_show:!1}),e.removeClass("player-fullscreen"),e.isFullscreen(!1),e.container.setState({is_fullscreen:!1})),e.isFullscreen()?this.setState({is_show:!0}):this.setState({is_show:!1})}},{key:"className",value:function(){var e=[];return this.state.is_show&&e.push("show-guide-fullscreen"),e.join(" ")}},{key:"render",value:function(){if(this.props.player.adSystem)return null;var e=this.className();return c.createElement("div",{className:e})}}]),t}(t.Component),n.propTypes={player:e.PropTypes.object.isRequired},r=o,function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(r.prototype,"showGuildOnFullscreen",[e.autobind],Object.getOwnPropertyDescriptor(r.prototype,"showGuildOnFullscreen"),r.prototype),r),d=(l=u=function(e){function t(e){s(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.props.player.on("keydown",r._handleKeyDown),r}return y(t,e),p(t,[{key:"_handleKeyDown",value:function(e){var t=this.props,r=t.player,n=t.seekStep,o=t.volumeStep,i=void 0,u=void 0;switch(e.which){case 32:e.preventDefault(),r.paused()?r.play():r.pause();break;case 37:e.preventDefault(),i=r.currentTime()-n,r.currentTime()<=n&&(i=0);try{u=100*i/r.duration(),r.container.controlBar.progressControl.progressSlider.playProgress.update(u)}catch(e){}r.currentTime(i);break;case 39:e.preventDefault(),i=r.currentTime()+n;try{u=100*i/r.duration(),r.container.controlBar.progressControl.progressSlider.playProgress.update(u)}catch(e){}r.currentTime(i);break;case 40:e.preventDefault(),r.muted(!1),r.volume(r.volume()-o);break;case 38:e.preventDefault(),r.muted(!1),r.volume(r.volume()+o);break;case 77:r.muted()?r.muted(!1):r.muted(!0);break;case 70:r.isFullscreen()?r.exitFullscreen():r.requestFullscreen()}}}]),t}(e.Plugin),u.defaultProps={seekStep:5,volumeStep:.1},i=l,function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(i.prototype,"_handleKeyDown",[e.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleKeyDown"),i.prototype),i);a.registerPlugin("guidePlugin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{seekStep:5},r=this;if(e.agent.isMobile)return null;r.one("ready",function(){var e=c.createElement(h,{key:"guidescreen",player:r});r.container.addChild(e,1)}),new d(f({player:r},t))})})}();/**
 * postrollPlugin - v1.0.62 - 14:21:44 30-11-2020
 * Author: cuongtt
 */

!function(){var t=void 0;!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("playercore")):"function"==typeof t&&t.amd?t(["playercore"],o):o(e.EventPlayerCore)}(this,function(t){"use strict";var e="default"in t?t.default:t,o=(function(){function t(t){this.value=t}function e(e){function o(n,a){try{var i=e[n](a),s=i.value;s instanceof t?Promise.resolve(s.value).then(function(t){o("next",t)},function(t){o("throw",t)}):r(i.done?"return":"normal",i.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?o(n.key,n.arg):a=null}var n,a;this._invoke=function(t,e){return new Promise(function(r,i){var s={key:t,arg:e,resolve:r,reject:i,next:null};a?a=a.next=s:(n=a=s,o(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),r=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=t.playerconfig.DEFAULT,l={IDLE:"IDLE",PREPARE:"PREPARE",RUNNING:"RUNNING",SUCCESS:"SUCCESS"},c=function(t){function e(t){o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));r.defaultProps={number:-1},r.state={count:0,postrollstate:l.IDLE,prepareSuccess:!0,contentEnded:!1};var n=r.props,a=n.player,c=n.preLoad;return r.isPreparePost=!1,r.handleContentEnded=r.handleContentEnded.bind(r),r.checkDurationIsGreat=r.checkDurationIsGreat.bind(r),r.checkToStartPostroll=r.checkToStartPostroll.bind(r),a.on(s.EVENT.PLAYER_ENDED_CONTEND,r.handleContentEnded),a.on("durationchange",r.checkDurationIsGreat),a.on("play",r.checkDurationIsGreat),a.on("loadedmetadata",r.checkDurationIsGreat),c&&(a.on("timeupdate",r.checkToStartPostroll),r.setState({prepareSuccess:!1})),r}return a(e,t),r(e,[{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat),t.off("timeupdate",this.checkToStartPostroll),t.off(s.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded)}},{key:"checkToStartPostroll",value:function(){var t=this.props.player;this.isPreparePost||t.currentTime()+6>=t.duration()&&(this.isPreparePost=!0,this.preparePostroll())}},{key:"preparePostroll",value:function(){var t=this.props.player,e=this;t.trigger("preparePostrollVast"),t.one("preparePostrollSuccess",function(){e.setState({prepareSuccess:!0}),e.startPostroll()})}},{key:"_startPostroll",value:function(){var t=this.props.player,e=this;this.setState({postrollstate:l.RUNNING}),t.one(s.EVENT.AD_END,function(){e.setState({postrollstate:l.SUCCESS}),t.one("play",function(){e.setState({postrollstate:l.IDLE}),t.currentTime(0)}),t.trigger(s.EVENT.AD_ENDED_POSTROLL)}),t.trigger(s.EVENT.AD_ORDER_START_POSTROLL)}},{key:"checkDurationIsGreat",value:function(){var t=this.props.player,e=t.duration();if(!Number.isNaN(e)){var o=t.options().params;0!==e&&(o.postroll||(t.trigger("postrollignore"),t.off(s.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat)))}}},{key:"startPostroll",value:function(){var t=this.props.player,e=this.state,o=e.prepareSuccess,r=e.contentEnded,n=e.postrollstate,a=this;o&&r?"RUNNING"!==n&&(this.setState({postrollstate:l.RUNNING}),t.one(s.EVENT.AD_END,function(){a.setState({postrollstate:l.SUCCESS,contentEnded:!1}),t.one("play",function(){a.setState({postrollstate:l.IDLE}),t.currentTime(0)}),a.isPreparePost=!1,t.trigger(s.EVENT.AD_ENDED_POSTROLL)}),t.trigger(s.EVENT.AD_ORDER_START_POSTROLL)):!o&&r&&t.trigger(s.EVENT.AD_ENDED_POSTROLL)}},{key:"handleContentEnded",value:function(){var t=this.state,e=t.count,o=t.postrollstate,r=this.props,n=r.player,a=r.number;if("IDLE"===o){if(this.setState({count:++e,contentEnded:!0}),e>a&&a>=0)return n.off(s.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),void(n.play=this.oriPlay);this.startPostroll()}}}]),e}(t.Plugin),u=e.getComponent("Player");e.registerPlugin("postrollPlugin",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{number:1},o=this,r=o.options().params;if(r.postroll){var a=!1;t.agent.isIOS||r.noAdsLoad||!u.prototype.AdsPlayerPlugin||(a=!0);var i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox",document.body.appendChild(i),window.setTimeout(function(){i.remove()},100),new c(n({},e,{player:o,preLoad:a}))}})})}();/**
 * vcTrackingPlugin - v1.0.0 - 15:09:38 05-01-2021
 * Author: TuanLDT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var i,r=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=0;i<r;i++)if(t.call(n,e[i],i,e))return e[i]}},{}],2:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=i-n;return a>=0&&s>=0&&{top:n,bottom:i,left:r,right:o,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var n=t;n;){if(n==e)return!0;n=h(n)}return!1}function h(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(i){var o=i.element,a=l(o),s=this._rootContainsTarget(o),u=i.entry,c=e&&s&&this._computeTargetAndRootIntersection(o,t),h=i.entry=new n({time:r(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var r=l(n),o=h(n),a=!1;!a;){var s=null,c=1==o.nodeType?e.getComputedStyle(o):{};if("none"==c.display)return;if(o==this.root||o==t?(a=!0,s=i):o!=t.body&&o!=t.documentElement&&"visible"!=c.overflow&&(s=l(o)),s&&!(r=u(s,r)))break;o=h(o)}return r}},i.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},i.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},i.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},i.prototype._unregisterInstance=function(){var e=d.indexOf(this);-1!=e&&d.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:e.clientWidth||-1,elementHeight:e.clientHeight||-1,iframeContext:r(),focus:i()}};var i=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(r()===o.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},r=n.iFrameContext=function(){try{if(window.top===window)return o.ON_PAGE;for(var e=window;e.parent!==e;){if(e.parent.document.domain!==e.document.domain)return o.CROSS_DOMAIN_IFRAME;e=e.parent}o.SAME_DOMAIN_IFRAME}catch(e){return o.CROSS_DOMAIN_IFRAME}},o=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(e,t,n){"use strict";e("array-find")},{"array-find":1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Measurement/MeasurementTechniques/BaseTechnique")),o=(n.validTechnique=function(e){return"function"==typeof e&&Object.getOwnPropertyNames(r.default).reduce(function(t,n){return n&&i(e[t])===i(r.default[t])},!0)},n.validElement=function(e){return e&&e.toString().indexOf("Element")>-1},n.validateCriteria=function(e){var t=e.inViewThreshold,n=e.timeInView,i=!1,r=[];return("number"!=typeof t||t>1)&&(i=!0,r.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(i=!0,r.push("timeInView must be a number greater to or equal 0")),{invalid:i,reasons:r.join(" | ")}});n.validateStrategy=function(e){var t=e.autostart,n=e.techniques,i=e.criteria,r=!1,a=[];"boolean"!=typeof t&&(r=!0,a.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(r=!0,a.push("techniques must be an array containing atleast on measurement techniques"));var s=o(i);return s.invalid&&(r=!0,a.push(s.reasons)),{invalid:r,reasons:a.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../Timing/InViewTimer")),u=e("./Strategies/"),l=e("../Helpers/Validators"),c=i(e("../Environment/Environment")),h=i(e("./Events")),d=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=t,this._strategy=o({},u.DEFAULT_STRATEGY,i),this._criteriaMet=!1;var a=(0,l.validateStrategy)(this._strategy);if(a.invalid)throw a.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(h.UNMEASUREABLE,c.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return a(e,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(e){return this._addCallback(e,h.START)}},{key:"onViewableStop",value:function(e){return this._addCallback(e,h.STOP)}},{key:"onViewableChange",value:function(e){return this._addCallback(e,h.CHANGE)}},{key:"onViewableComplete",value:function(e){return this._addCallback(e,h.COMPLETE),this.criteriaMet&&this._techniqueChange(h.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(e){return this._addCallback(e,h.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(h.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(e){return e.filter(l.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(e){return!e.unmeasureable})}},{key:"_instantiateTechnique",value:function(e){return new e(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(e){e&&(e.onInView(this._techniqueChange.bind(this,h.INVIEW,e)),e.onChangeView(this._techniqueChange.bind(this,h.CHANGE,e)),e.onOutView(this._techniqueChange.bind(this,h.OUTVIEW,e)))}},{key:"_techniqueChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,i=this._appendEnvironment(t);switch(e){case h.INVIEW:this._criteriaMet||(this.timer=new s.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,t)),this.timer.start(),n=h.START);break;case h.CHANGE:n=e;break;case h.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=e);break;case h.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=h.STOP);break;case h.UNMEASUREABLE:n=h.UNMEASUREABLE}n&&this._publish(n,i)}},{key:"_publish",value:function(e,t){Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(e){return e(t)})}},{key:"_timerElapsed",value:function(e){this._techniqueChange(h.COMPLETE,e)}},{key:"_addCallback",value:function(e,t){if(this._listeners[t]&&"function"==typeof e)this._listeners[t].push(e);else if("function"!=typeof e)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(e){return o({},{percentViewable:void 0===e.percentViewable?-1:e.percentViewable,technique:e.techniqueName||-1,viewable:void 0===e.viewable?-1:e.viewable},c.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),e}();n.default=d,t.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return r(e,[{key:"onInView",value:function(e){return this.addCallback(e,"inView")}},{key:"onChangeView",value:function(e){return this.addCallback(e,"changeView")}},{key:"onOutView",value:function(e){return this.addCallback(e,"outView")}},{key:"addCallback",value:function(e,t){if("function"==typeof e&&this.listeners[t])this.listeners[t].push(e);else if("function"!=typeof e)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),e}();n.default=o,t.exports=n.default},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTechnique")),u=e("../../Helpers/Validators"),l=e("../Strategies/"),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DEFAULT_STRATEGY.criteria;i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(void 0!==n&&e)o.element=e,o.criteria=n,o.inView=!1,o.started=!1,o.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===o.notificationLevels.indexOf(o.criteria.inViewThreshold)&&o.notificationLevels.push(o.criteria.inViewThreshold);else if(!e)throw"element not provided";return o}return o(t,s.default),a(t,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(e){e&&e.length&&void 0!==e[0].intersectionRatio&&(this.percentViewable=e[0].intersectionRatio,e[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(e){return e()})),e[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(e){return e()})),this.listeners.changeView.forEach(function(e){return e()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,u.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),t}();n.default=c,t.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(e("./IntersectionObserver")),l=(i(e("intersection-observer")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../Environment/Environment"))),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,u.default),s(t,[{key:"unmeasureable",get:function(){return l.iFrameContext()===l.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),t}();n.default=c,t.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return i(r).default}});var o=e("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return i(o).default}});var a=e("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return i(a).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var r=i(e("../../Helpers/Validators")),o=i(e("../MeasurementTechniques/")),a=i(e("../../Options/ViewabilityCriteria")),s=n.DEFAULT_STRATEGY={autostart:!0,techniques:[o.IntersectionObserver,o.IntersectionObserverPolyfill],criteria:a.MRC_VIDEO};n.StrategyFactory=function(){var e={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.criteria},t=r.validateStrategy(e);if(t.invalid)throw t.reasons;return e}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e("./Helpers/Polyfills.js");var s=r(e("./Measurement/Events")),u=i(e("./Timing/InViewTimer")),l=r(e("./Measurement/Strategies/")),c=(r(e("./Environment/Environment")),i(e("./Measurement/MeasurementExecutor"))),h=r(e("./Options/ViewabilityCriteria")),d=r(e("./Measurement/MeasurementTechniques/")),f=function(){function e(){o(this,e),this.executors=[]}return a(e,[{key:"measureElement",value:function(e,t){var n=new c.default(e,t);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(e){return e.dispose()})}}]),e}();n.default=f,f.ViewabilityCriteria=h,f.MeasurementExecutor=c.default,f.MeasurementTechniques=d,f.InViewTimer=u.default,f.Strategies=l,f.Events=s,t.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.duration=t,this.listeners=[],this.completed=!1}return r(e,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(e){return e()})}},{key:"elapsed",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),e}();n.default=o,t.exports=n.default},{}]},{},[13])(13)}),function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("OpenVV")):"function"==typeof e&&e.amd?e(["playercore","OpenVV"],n):n(t.EventPlayerCore,t.OpenVV)}(this,function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=(r<10?"0"+r:r)+":",i=((r||o>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t;var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function e(t,n){var i,r=[];for(i in t)if(t.hasOwnProperty(i)){var o=n?n+"["+i+"]":i,a=t[i];r.push(null!==a&&"object"===(void 0===a?"undefined":T(a))?e(a,o):encodeURIComponent(o)+"="+encodeURIComponent(a))}return r.join("&")},A=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},P={"afamily.vn":1,"autopro.com.vn":2,"cafef.vn":3,"dantri.com.vn":4,"gamek.vn":5,"genk.vn":6,"kenh14.vn":7,"soha.vn":8,"giadinh.net.vn":9,"nld.com.vn":10,"lazada.vn":11,"bds.rongbay.com":12,"muachung.vn":13,"6giosang.com":14,"m.dantri.com.vn":16,"cafebiz.vn":17,"m.kenh14.vn":18,"vccloud.vn":19,"m.soha.vn":20,"m.gamek.vn":21,"m.genk.vn":22,"m.autopro.com.vn":23,"m.afamily.vn":24,"m.cafebiz.vn":25,"m.cafef.vn":26,"m.giadinh.net.vn":27,"vneconomy.vn":28,"m.vneconomy.vn":29,"analytics.admicro.vn":30,"m.nld.com.vn":31,"nguyenkim.com":32,"publisher-website":35,vc:36,"suckhoedoisong.vn":38,"muare.vn":39,"tratu.soha.vn":40,"socnhi.com":41,"enbac.com":42,"ttvnol.com":43,"linkhay.com":44,"f319.com":45,"vtv.vn":46,"rongbay.com":47,"rongbay.vn":48,"m.vtv.vn":49,"m.linkhay.com":50,"m.enbac.com":51,"plaza.muachung.vn":52,"all.enbac.com":53,"oto.enbac.com":54,"waf.afamily.vn":55,"vntm.kenh14.vn":56,"herewego.kenh14.vn":59,"laodong.com.vn":60,"m.laodong.com.vn":61,"thanhnien.vn":62,"tuoitre.vn":63,"nemo.vn":64,"marketingit.admicro.vn":65,"nextgen.kenh14.vn":66,"quizz.kenh14.vn":67,"phimchat.net":69,"sannhac.com":70,"wechoice.vn":71,"card.sacombank.com.vn":73,"admicro1-3.thanhnien.vn":77,"thanhnien-other.thanhnien.vn":78,"eva.vn":79,"m.eva.vn":80,"m.thanhnien.vn":81,"thethao.thanhnien.vn":82},O={load:1,play:2,replay:3,pause:4,resume:5,fullscreen:6,normalscreen:7,firstQuartile:8,midpoint:9,thirdQuartile:10,endedcontent:11,complete:11,changeQuality:12,poll:14,close:15,user_change_quality:16,auto_change_quality:17,current_resolution_change:18,error:20,waiting:21,adstart:22,"bit-receive":23,timetostart:24,adpoll:25,pausedAd:26,adviewable:30},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),I=w.getComponent("Player"),V=e.playerconfig.DEFAULT,M={preroll:1,midroll:2,postroll:3,interactive:4},C=0,D=function(t){function i(e){r(this,i);var t=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.isTabActive=!0;var n=t.props.player,a=t;t.trackStats=t.trackStats.bind(t),t.getStats=t.getStats.bind(t),t._handePollAdStart=t._handePollAdStart.bind(t),t._handePollAdPlay=t._handePollAdPlay.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handePauseAd=t._handePauseAd.bind(t),t.isActive=t.isActive.bind(t),t._handleTrackQuartile=t._handleTrackQuartile.bind(t),I.prototype.AdsPlayerPlugin?n.on(V.EVENT.AD_START,t._handePollAdStart):(n.on(V.EVENT.VPAID_AD_START,t._handePollAdStart),n.on(V.EVENT.VAST_AD_START,t._handePollAdStart)),n.one(V.EVENT.AD_PAUSE_AD,t._handePauseAd),n.on(V.EVENT.AD_RESUME_AD,function(){n.one(V.EVENT.AD_PAUSE_AD,a._handePauseAd)}),n.on("EventTrackingAds",t._handleTrackQuartile),n.on(V.EVENT.AD_PLAY,t._handePollAdPlay),n.on(V.EVENT.AD_END,t._handlePollAdEnded),window.addEventListener?window.addEventListener("message",function(e){a.handleMessage(e)},!1):window.attachEvent&&window.attachEvent("onmessage",function(e){a.handleMessage(e)});try{window.parent.addEventListener("focus",t.isActive)}catch(e){a.isTabActive=!1}try{window.parent.addEventListener("blur",t.isActive)}catch(e){a.isTabActive=!1}return t}return a(i,e.Plugin),R(i,[{key:"_handleTrackQuartile",value:function(e,t){var n=this.props.track,i=this.props.player,r=Math.ceil(100*i.volume()),o=this.state,a=o.adDuration,s=o.remainingTime,u=o.bid,l=o.atype,c=o.avdu,h=o.aview,d=o.apaused,f=o.cam;if(i.muted()&&(r=0),a&&!d){var p="-1";s&&a>=s&&(p=(p=a-s).toFixed(1)),n({advolume:r,avdu:c||"-1",bid:u,cam:f,atype:l,actime:p,aview:h,aidx:C,evt:O[t]})}}},{key:"isActive",value:function(e){"focus"===e.type?this.isTabActive=!0:"blur"===e.type&&(this.isTabActive=!1)}},{key:"handleMessage",value:function(e){var t=e[e.message?"message":"data"];"object"===(void 0===t?"undefined":S(t))&&t.aview&&this._setAview(t.aview/100)}},{key:"_handePollAdStart",value:function(){++C;var e=this.props.player;this.pausedAd_=!1,this.trackStatsInterval_=e.setInterval(this.trackStats,this.props.trackInterval),this.getStatsInterval_=e.setInterval(this.getStats,this.props.statsInterval)}},{key:"_handePollAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var i=n.vastAd.adPosition(),r=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";i&&(a=M[i]),this.setState({bid:r,atype:a,cam:o})}}},{key:"_handePauseAd",value:function(){var e=this.props.track,t=this.state,n=t.adDuration,i=t.remainingTime,r=t.bid,o=t.atype,a=t.avdu,s=t.aview,u="-1";i&&n>=i&&(u=(u=n-i).toFixed(1)),e({avdu:a||"-1",bid:r,atype:o,actime:u,aview:s,aidx:C,evt:O.pausedAd})}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.clearInterval(this.trackStatsInterval_),e.clearInterval(this.getStatsInterval_),this.state={}}},{key:"getStats",value:function(){var t=this,i=this.props.player,r=this.state.adDuration,o=i.vastAd.adUnit(),a=!1;try{a=i.vastAd.paused(),this.setState({apaused:a?1:0})}catch(e){}r||o.getAdDuration().then(function(e){t.setState({adDuration:e,avdu:n(e)})}),o.getAdRemainingTime().then(function(e){t.setState({remainingTime:e})});try{var s=i.el_.getBoundingClientRect(),u=1,l=!1;try{window.top!==window.self&&(l=!0)}catch(e){l=!0}try{if(l&&window.admid)u=window.top.getViewablePercentOfEle(window.admid)/100;else if(l&&window.frameElement.id){var c=window.top.document.getElementById(window.frameElement.id).getBoundingClientRect();c.top<0?u=c.height+c.top>0?(c.height+c.top)/c.height:0:c.top+c.height>window.screen.height&&(u=c.top<window.screen.height?(window.screen.height-c.top)/c.height:0)}else s.top<0?u=s.height+s.top>0?(s.height+s.top)/s.height:0:s.top+s.height>window.screen.height&&(u=s.top<window.screen.height?(window.screen.height-s.top)/s.height:0)}catch(e){var h=new URLSearchParams(window.location.search).get("admid");window.top.postMessage("aview_"+h,"*"),window.parent.removeEventListener("focus",this.isActive),window.parent.removeEventListener("blur",this.isActive)}this.isTabActive||e.agent.isMobile||(u=-1),this._setAview(u)}catch(e){}}},{key:"_setAview",value:function(e){e=e.toFixed(2),this.setState({aview:e})}},{key:"trackStats",value:function(){var e=this.props.track,t=this.props.player,n=Math.ceil(100*t.volume()),i=this.state,r=i.adDuration,o=i.remainingTime,a=i.bid,s=i.atype,u=i.avdu,l=i.aview,c=i.apaused,h=i.cam;if(t.muted()&&(n=0),r&&!c){var d="-1";o&&r>=o&&(d=(d=r-o).toFixed(1)),e({advolume:n,avdu:u||"-1",bid:a,cam:h,atype:s,actime:d,aview:l,aidx:C,evt:O.adpoll})}}}]),i}();D.defaultProps={trackInterval:1e3,statsInterval:200};var x=function(e,t){new D({player:e,track:t})},N=function(e,t){var n=e.options().scriptinfo,i="-1",r="-1";if(n){var o=n.plugins;if(i=n.core.version,o&&0!==o.length){var a=[];o.forEach(function(e){var t=e.name,n=e.version;a.push(t+":"+n)}),r=a.join(";")}}t({pvs:i,pplvs:r,evt:O.load})},j=function(e,t){e.one("play",function(){t({evt:O.play})})},U=e.playerconfig.DEFAULT,L=function(e,t){function n(){e.vastAd||i()}function i(){e.off("play",n),t({evt:O.replay})}e.on(U.EVENT.PLAYER_ENDED_CONTEND,function(){e.off("play",n),e.on("play",n)})},F=e.playerconfig.DEFAULT,q=function(e,t){e.on(F.EVENT.USER_PAUSE,function(){t({evt:O.pause})})},B=e.playerconfig.DEFAULT,H=function(e,t){e.on(B.EVENT.USER_RESUME,function(){t({evt:O.resume})})},Y=function(e,t){window.onbeforeunload=function(){var n=e.currentTime();t({evt:O.close,lvt:n})}},Q=function(e,t){e.on("fullscreenchange",function(){var n="fullscreen";e.isFullscreen()||(n="normalscreen"),t({evt:O[n]})})},W=function(e,t){function n(e,t){var n=e.time;return t>=n&&t<=n+5e3}function i(e,i){var r=o[e];r.tracked||n(r,i)&&(r.tracked=!0,t({evt:O[e]}))}function r(){if(o){var t=1e3*e.currentTime(),n=o,r=n.firstQuartile,a=n.midpoint,s=n.thirdQuartile;r.tracked||i("firstQuartile",t),a.tracked||i("midpoint",t),s.tracked||i("thirdQuartile",t)}}e.one("loadedmetadata",function(){var t=e.duration();o={firstQuartile:{tracked:!1,time:Math.round(25*t*1e3)/100},midpoint:{tracked:!1,time:Math.round(50*t*1e3)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t*1e3)/100}}}),e.one("play",function(){e.on("timeupdate",r)});var o=void 0},G=e.playerconfig.DEFAULT,z=function(e,t){e.one(G.EVENT.PLAYER_ENDED_CONTEND,function(){t({evt:O.endedcontent})})},$=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),K=e.playerconfig.DEFAULT,J={preroll:1,midroll:2,postroll:3,interactive:4},X=function(n){function i(e){s(this,i);var t=u(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.props.player;return t._handleAdStart=t._handleAdStart.bind(t),t._handleAdPlay=t._handleAdPlay.bind(t),n.on(K.EVENT.VAST_AD_START,t._handleAdStart),n.on(K.EVENT.VPAID_AD_IMPRESSION,t._handleAdStart),n.on(K.EVENT.AD_PLAY,t._handleAdPlay),t}return l(i,e.Plugin),$(i,[{key:"_handleAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var i=n.vastAd.adPosition(),r=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";i&&(a=J[i]),this.setState({bid:r,atype:a,cam:o})}}},{key:"_handleAdStart",value:function(){var e=this.props,n=e.player,i=e.track,r=this,o=document.getElementById(""+n.id_),a=new t,s=[t.MeasurementTechniques.IntersectionObserver],u={inViewThreshold:.5,timeInView:5e3},l=t.Strategies.StrategyFactory(!0,s,u);a.measureElement(o,l).onViewableStart(function(){}).onViewableComplete(function(){var e=r.state,t=e.bid,o=e.atype,a=e.cam,s=Math.ceil(100*n.volume());n.muted()&&(s=0),i({advolume:s,bid:t,cam:a,atype:o,evt:O.adviewable})})}}]),i}();X.defaultProps={trackInterval:1e3,statsInterval:200};var Z=function(e,t){new X({player:e,track:t})},ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),te=e.playerconfig.DEFAULT,ne={0:0,144:1,240:2,360:3,480:4,720:5,1080:6},ie=0,re=function(t){function n(e){c(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=t.props.player;return t._handePollAdStart=t._handePollAdStart.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t.startPoll=t.startPoll.bind(t),t.stopPoll=t.stopPoll.bind(t),t._updatePoll=t._updatePoll.bind(t),i.on("play",t.startPoll),i.on("pause",t.stopPoll),i.on("ended",t.stopPoll),i.on("timeupdate",t._handleTimeUpdate),i.on(te.EVENT.AD_START,t._handePollAdStart),i.on(te.EVENT.AD_END,t._handlePollAdEnded),t}return d(n,e.Plugin),ee(n,[{key:"_handePollAdStart",value:function(){var e=this.props.player;e.off("play",this.startPoll),e.off("timeupdate",this._handleTimeUpdate),this.stopPoll()}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.on("timeupdate",this._handleTimeUpdate),e.on("play",this.startPoll)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player,t=void 0;try{t=e.tech_.el_.videoHeight}catch(e){return}this.state.last_video_height!==t&&this.setState({last_video_height:t})}},{key:"startPoll",value:function(){this.pollInterval&&this.stopPoll(),this.pollInterval=setInterval(this._updatePoll,this.props.pollInterval)}},{key:"stopPoll",value:function(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}},{key:"dispose",value:function(){var e=this.props.player;this.stopPoll(),e.off("play",this.startPoll),e.off("pause",this.stopPoll),e.off("ended",this.stopPoll),e.off("timeupdate",this._handleTimeUpdate),e.off(te.EVENT.AD_START,this._handePollAdStart),e.off(te.EVENT.AD_END,this._handlePollAdEnded)}},{key:"_updatePoll",value:function(){var e=this.props,t=e.track,n=e.player,i=this.currentQuality(),r=ne[i],o=0,a=0;try{var s=n.buffered(),u=n.currentTime();o=(o=s.end(s.length-1)-u)>=0?Math.floor(o):0}catch(e){}try{a=n.tech_.el_.webkitDroppedFrameCount?n.tech_.el_.webkitDroppedFrameCount:n.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}ie>=parseInt(n.duration()/3)?this.dispose():(ie++,t({evt:O.poll,cqua:r,bft:o,drf:a}))}},{key:"currentQuality",value:function(){var e=this.state.last_video_height;return e>=1080?1080:e>=720?720:e>=480?480:e>=360?360:e>=240?240:144}}]),n}();re.defaultProps={pollInterval:6e3};var oe=function(e,t){new re({player:e,track:t})},ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),se=e.playerconfig.DEFAULT,ue=w.getComponent("Player"),le={preroll:1,midroll:2,postroll:3,interactive:4},ce=function(t){function n(e){f(this,n);var t=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=t.props.player;return t.aidx=0,t.trackStartAd=t.trackStartAd.bind(t),t._handleReplay=t._handleReplay.bind(t),ue.prototype.AdsPlayerPlugin?i.on(se.EVENT.AD_START,t.trackStartAd):(i.on(se.EVENT.VPAID_AD_START,t.trackStartAd),i.on(se.EVENT.VAST_AD_START,t.trackStartAd)),i.on(se.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),i.on(se.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return v(n,e.Plugin),ae(n,[{key:"trackStartAd",value:function(){++this.aidx;var e=this.props,t=e.player,n=e.track,r=t.vastAd.vastResponse(),o=t.vastAd.adPosition(),a=r.ads[0].id,s=void 0,u=void 0,l="-1";r.campains.length>0&&(l=r.campains[0]?r.campains[0]:"-1");var c="-1";o&&(c=le[o]);var h=t.vastAd.props,d=h.adTagUrl;if(h.adsITVC&&i("u",d)){var f=i("u",d).match(/(http[s]?:\/\/)?([^/\s]+)(\/.*)/);return s=f[2],u=f[3],void n({evt:O.adstart,bid:a,cam:l,atype:c,aidx:this.aidx,dmn:s,path:u})}n({evt:O.adstart,bid:a,cam:l,atype:c,aidx:this.aidx})}},{key:"_handleReplay",value:function(){this.aidx=0}}]),n}(),he=function(e,t){new ce({player:e,track:t})},de=e.playerconfig.DEFAULT,fe=function(e,t){function n(){if(a.length){for(var n=0,i=0,o=0,s=0,u=0,l=a.length;a.length;){var c=a.shift();n+=c.bitreceive,i+=c.roundTrip,o+=c.apb,s=c.tbf,u=c.trq}var h=n;i>1e3&&(h=1e3*h/i);var d=0,f=0;try{var p=e.buffered(),v=e.currentTime();d=(d=p.end(p.length-1)-v)>=0?Math.floor(d):0}catch(e){}try{f=e.tech_.el_.webkitDroppedFrameCount?e.tech_.el_.webkitDroppedFrameCount:e.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}var y=f-r;r=f,t({bft:d,nbf:l,size:Math.ceil(n/8),tbf:s,trq:u,drf:y,apb:Math.round(o),evt:O["bit-receive"],bw:Math.round(h)})}}function i(e,t){var i=t.data,r=i.stats,o=i.frag,s=8*r.total,u=r.tbuffered-r.trequest;a.push({bitreceive:s,roundTrip:u,tbf:Math.ceil(r.tbuffered),trq:Math.ceil(r.trequest),apb:o.duration}),n()}var r=0;e.on("loadedmetadata",function(){o&&o.off(de.EVENT.HLS_FRAG_BUFFERED,i),(o=e.tech_).on(de.EVENT.HLS_FRAG_BUFFERED,i)});var o=void 0,a=[]},pe=function(e,t){var n=void 0,i=void 0;e.one("play",function(){n=Date.now()}),e.one("playing",function(){i=Date.now();var e=0;n&&i&&(e=(e=i-n)>=0?e:0),t({tts:e,evt:O.timetostart})})},ve=e.playerconfig.DEFAULT,ye=function(e,t){e.on(ve.EVENT.PLAYER_ERROR,function(e,n){var i="-1";switch(n.code){case ve.ERROR.ERROR_100.code:i=1;break;default:i=n.code}t({evt:O.error,err:i})}),e.one("play",function(){e.setTimeout(function(){var n=e.currentTime();e.paused()||0!==n||t({evt:O.error,err:2})},1e4)})},me=function(e,t){e.on("waiting",function(){var n=e.currentTime().toFixed(1);t({ctime:n,evt:O.waiting})})},_e=e.playerconfig.DEFAULT,be=function(e,t){function n(e,t){t({vlm:e})}var i,r;e.on("ready",function(){i=Math.ceil(100*e.volume()),e.muted()&&(i=0)}),e.on(_e.EVENT.USER_CHANGE_MUTE,function(o,a){i=Math.ceil(100*e.volume()),a?(r=i+":0",i=0):r="0:"+i,n(r,t)}),e.on(_e.EVENT.TRACKING_VOLUME,function(e,o){i!==o?(r=i+":"+o,i=o,n(r,t)):i=o})},ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ee=e.playerconfig.DEFAULT,we=function(t){function n(e){y(this,n);var t=m(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={last_currentTime:0};var i=t.props.player;return t.pdu=0,t._handeAdStart=t._handeAdStart.bind(t),t._handleRestorePlayback=t._handleRestorePlayback.bind(t),t.handleCalculatePdu=t.handleCalculatePdu.bind(t),t.handleUpdateFlagPdu=t.handleUpdateFlagPdu.bind(t),t._handleReplay=t._handleReplay.bind(t),i.on("timeupdate",t.handleCalculatePdu),i.on("seeking",t.handleUpdateFlagPdu),i.on(Ee.EVENT.AD_START,t._handeAdStart),i.on(Ee.EVENT.AD_RESTORED_PLAYBACK,t._handleRestorePlayback),i.on(Ee.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),i.on(Ee.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return _(n,e.Plugin),ge(n,[{key:"_handleReplay",value:function(){this.pdu=0,this.setState({last_currentTime:0})}},{key:"_handeAdStart",value:function(){var e=this.props.player;e.off("timeupdate",this.handleCalculatePdu),e.off("seeking",this.handleUpdateFlagPdu)}},{key:"_handleRestorePlayback",value:function(){var e=this.props.player;e.on("timeupdate",this.handleCalculatePdu),e.on("seeking",this.handleUpdateFlagPdu)}},{key:"handleCalculatePdu",value:function(){var e=this.props.player,t=this.state.last_currentTime,n=e.currentTime();if(this.setState({last_currentTime:n}),n<=t)this.setState({last_currentTime:n});else{var i=n-t;i>2||(this.pdu+=i,this.updatePDU())}}},{key:"handleUpdateFlagPdu",value:function(){var e=this,t=this.props.player;t.off("timeupdate",this.handleCalculatePdu),t.one("seeked",function(){var n=t.currentTime();e.setState({last_currentTime:n}),t.on("timeupdate",e.handleCalculatePdu)})}},{key:"updatePDU",value:function(){this.props.updatePDU(Math.round(this.pdu))}}]),n}(),Te=function(e,t){new we({player:e,updatePDU:t})},ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Pe=e.playerconfig.DEFAULT,Oe=function(t){function r(e){b(this,r);var t=g(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t.waitTrack=[];var n=t,o=t.props,a=o.player,s=o.defaultParams,u=o.ref,l=o.onlyAds,c=void 0!==l&&l,h=a.options().params,d=h.pid||A(),f=u?decodeURIComponent(u):document.referrer?document.referrer:location.href,p=document.location.href;/adminplayer\.sohatv\.vn/.test(p)&&(p=f),window.top!=window.self&&(p=f);var v=p.match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/),y="-1",m="-1",_="-1";v&&v.length&&(y=v[3],m=v[2],_=P[m]||"-1");var E=c?0:a.options().params.live?2:1,w=h.vtype||"-1",T=h.key||"-1";return a.options().params.live&&(f+="&vid="+a.options().params.v),m=m.replace("www.",""),t.state={params:ke({key:T,dmn:m,dmnid:_,path:y,vtype:w,vtarget:E,ref:f,vid:h.vid||h.v||h.file||h.mp4||h.m3u8||"-1",bw:"-1",pid:d,vdu:"-1",ctime:"-1",guid:"-1",ptype:1,pdu:0},s)},t.track_poll=0,t.updatePDU=t.updatePDU.bind(t),t.track=t.track.bind(t),t._handleLoadedmetadata=t._handleLoadedmetadata.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t._handleLastBitrate=t._handleLastBitrate.bind(t),t._handleReplay=t._handleReplay.bind(t),a.on("loadedmetadata",t._handleLoadedmetadata),a.one("play",function(){a.on("timeupdate",n._handleTimeUpdate)}),a.on(Pe.EVENT.PLAYER_ENDED_CONTEND,function(){a.off("play",n._handleReplay),a.on("play",n._handleReplay)}),a.on(Pe.EVENT.AD_START,function(){if(a.vastAd.props.adsITVC){var e=a.vastAd.props.adTagUrl,t=n.state.params,r=i("u",e).match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/);t.dmn=r[2],t.path=r[3]}}),x(a,t.track),Z(a,t.track),N(a,t.track),j(a,t.track),L(a,t.track),q(a,t.track),H(a,t.track),Y(a,t.track),Q(a,t.track),W(a,t.track),z(a,t.track),oe(a,t.track),he(a,t.track),fe(a,t.track),pe(a,t.track),ye(a,t.track),me(a,t.track),be(a,t.track),Te(a,t.updatePDU),t}return E(r,e.Plugin),Ae(r,[{key:"getDefaultProps",value:function(){return{track_url:"//lg1.logging.admicro.vn/video_track?",defaultParams:{}}}}]),Ae(r,[{key:"_handleReplay",value:function(){if(!this.props.player.vastAd){var e=this.state.params;e.pid=A(),e.pdu=0,e.ptype=2}}},{key:"updatePDU",value:function(e){this.state.params.pdu=e}},{key:"_trackWaitEvent",value:function(){for(var e=this.waitTrack;e.length;){var t=e.shift();this.track(t)}}},{key:"track",value:function(e){var t=this.props.player,n=e.evt;if(!(14===n&&++this.track_poll>=parseInt(t.duration()/3))){if(!this.isFirstPlay&&20!==e.evt)switch(n){case O.play:this.isFirstPlay=!0,setTimeout(this._trackWaitEvent.bind(this),100);break;case O.load:break;default:return void this.waitTrack.push(e)}var i=this.state.params,r=this.props.track_url,o=ke({},i,e),a=k(o);(new Image).src=r+a}}},{key:"_handleLoadedmetadata",value:function(){var e=this.props.player,t=this.state.params,i=e.duration();"-1"===t.vdu&&i>0&&i!==1/0&&(t.vdu=n(i)),this.tech_&&this.tech_.off(Pe.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate),this.tech_=e.tech_,this.tech_.on(Pe.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player;if(!e.vastAd){var t=this.state.params,n=e.currentTime();t.ctime=n.toFixed(1)}}},{key:"_handleLastBitrate",value:function(e,t){var n=t.data,i=this.state.params,r=Math.round(8*n.stats.total*1e3/(n.stats.tbuffered-n.stats.trequest));i.bw=r}}]),r}(),Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};w.registerPlugin("vcTrackingPlugin",function(e){new Oe(Se({},e,{player:this}))})})}();/**
 * midrollPlugin - v1.0.0 - 14:21:30 30-11-2020
 * Author: TuanLDT
 */

!function(){var e=void 0;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],n):n(t.EventPlayerCore,t.vcReact)}(this,function(e,t){"use strict";var n,o,r,i,a="default"in e?e.default:e,s="default"in t?t.default:t,l=(function(){function e(e){this.value=e}function t(t){function n(r,i){try{var a=t[r](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};i?i=i.next=s:(r=i=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=e.playerconfig.DEFAULT,h={IDLE:"IDLE",PREPAIRING:"PREPAIRING",RUNNING:"RUNNING",DISPOSE:"DISPOSE"},f=(o=n=function(e){function t(e){l(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={left:null,dispose:!1},n.midrollState_=h.IDLE,n.prepareSuccess=!1,n.checkDurationLittle=n.checkDurationLittle.bind(n),n.handleVastResponse=n.handleVastResponse.bind(n),n.handleStopOrResume=n.handleStopOrResume.bind(n),n.updatePosition=n.updatePosition.bind(n),n.stopHandleEvent=n.stopHandleEvent.bind(n),n.resumeHandleEvent=n.resumeHandleEvent.bind(n),n.checkToStartMidroll=n.checkToStartMidroll.bind(n),n}return u(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this.props.player;e.on("timeupdate",this.checkToStartMidroll),e.on("durationchange",this.checkDurationLittle),e.on("ignoreEventAds",this.handleStopOrResume),e.on(c.EVENT.AD_MIDROLL_VASTRESPONSE,this.handleVastResponse),e.on(c.EVENT.AD_END,this.handleStopOrResume),e.on(c.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),e.on(c.EVENT.AD_START,this.stopHandleEvent),this.checkDurationLittle()}},{key:"componentWillUnmount",value:function(){var e=this.props.player;e.off("timeupdate",this.checkToStartMidroll),e.off("durationchange",this.checkDurationLittle),e.off("ignoreEventAds",this.handleStopOrResume),e.off(c.EVENT.AD_END,this.handleStopOrResume),e.off(c.EVENT.AD_MIDROLL_VASTRESPONSE,this.handleVastResponse),e.off(c.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),e.off(c.EVENT.AD_START,this.stopHandleEvent)}},{key:"checkDurationLittle",value:function(){var e=this.props,t=e.player,n=e.position.percent,o=!1,r=t.duration();r&&(t.off("durationchange",this.checkDurationLittle),r<40&&(o=!0),"0.8"===n&&r<360&&(o=!0),"0.5"===n&&r<120&&(o=!0),o?this.dispose():this.updatePosition())}},{key:"handleVastResponse",value:function(e,t){if(this.midrollState_===h.PREPAIRING)return t?void(this.vastResponse=t):this.dispose()}},{key:"handleStopOrResume",value:function(){this.midrollState_===h.IDLE?this.resumeHandleEvent():this.dispose()}},{key:"updatePosition",value:function(){var e=this.props,t=e.position,n=e.player,o=t.percent,r=t.seconds,i=n.duration();o?o=parseFloat(o):r&&(o=r/i);var a=100*o+"%",s=o*i;this.setState({left:a,starttime:s})}},{key:"stopHandleEvent",value:function(){this.props.player.off("timeupdate",this.checkToStartMidroll)}},{key:"resumeHandleEvent",value:function(){this.stopHandleEvent();var e=this,t=this.props.player;t.one("timeupdate",function(){t.on("timeupdate",e.checkToStartMidroll)})}},{key:"dispose",value:function(){var e=this.props.player;e.off("timeupdate",this.checkToStartMidroll),e.off("durationchange",this.checkDurationLittle),e.off("ignoreEventAds",this.handleStopOrResume),e.off(c.EVENT.AD_END,this.handleStopOrResume),e.off(c.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),e.off(c.EVENT.AD_START,this.stopHandleEvent),this.setState({dispose:!0})}},{key:"midrollPrepare",value:function(){var e=this.props,t=e.player,n=e.index,o=this;if(this.midrollState_===h.IDLE){var r=this.state.starttime;t.currentTime()+6>=r&&(this.midrollState_=h.PREPAIRING,t.trigger("prepareMidrollVast",n+1),t.one("prepareMidrollVastSuccess",function(){o.prepareSuccess=!0}))}}},{key:"midrollCountDown",value:function(){var e=this.props,t=e.player,n=e.preLoad;if(this.midrollState_===h.PREPAIRING&&this.vastResponse&&(!n||this.prepareSuccess)){var o=this.state.starttime,r=t.currentTime(),i=Math.round(o-r);i=i>=0&&i<=5?i:void 0,r>o&&t.trigger(c.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse),0===i&&(this.midrollState_=h.RUNNING,t.trigger(c.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse)),this.setState({timeToStart:i})}}},{key:"checkToStartMidroll",value:function(){this.midrollPrepare(),this.midrollCountDown()}},{key:"render",value:function(){var e=this.state,t=e.left,n=e.dispose,o=e.timeToStart;return n||o<=0||!t?null:s.createElement("div",null,s.createElement("div",{className:"midroll-marker",style:{left:t}}),"number"==typeof o?s.createElement("div",{className:"countdown-midroll"},"Quảng cáo sau: ",s.createElement("span",null,o,"s")):"")}}]),t}(t.Component),n.propTypes={player:e.PropTypes.object.isRequired,index:e.PropTypes.number,position:e.PropTypes.object,preLoad:e.PropTypes.bool},o),v=e.playerconfig.DEFAULT,y=(i=r=function(e){function t(e){l(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={renderMidroll:!0};var o=n.props.player;return n._handleEnded=n._handleEnded.bind(n),n._reRenderMidroll=n._reRenderMidroll.bind(n),o.on(v.EVENT.PLAYER_ENDED_CONTEND,n._handleEnded),o.on("player:reRenderAds",n._handleEnded),n}return u(t,e),p(t,[{key:"_handleEnded",value:function(){var e=this.props.player;e.off("play",this._reRenderMidroll),e.one("play",this._reRenderMidroll),this.setState({renderMidroll:!1})}},{key:"_reRenderMidroll",value:function(){this.setState({renderMidroll:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return t.renderMidroll!==this.state.renderMidroll}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.position,o=e.preLoad,r=this.state.renderMidroll,i=t.options().params;if(!r)return null;var a=i.midroll;if(!(a=n||a))return null;if("string"==typeof a){var l=a.match(/(0\.\d+)/g),p=a.match(/(\d+)(?=s)/g);for(a=[];l&&l.length;){var u=l.shift();a.push({percent:u})}for(;p&&p.length;){var d=p.shift();a.push({seconds:d})}}if(!a.length)return null;var c=document.createElement("div");return c.innerHTML="&nbsp;",c.className="adsbox",document.body.appendChild(c),window.setTimeout(function(){c.remove()},100),s.createElement("div",{className:"midroll-display"},a.map(function(e,n){return s.createElement(f,{key:n,position:e,index:n,player:t,preLoad:o})}))}}]),t}(t.Component),r.propTypes={player:e.PropTypes.object.isRequired,position:e.PropTypes.string,preLoad:e.PropTypes.bool},i),E=a.getComponent("Player");a.registerPlugin("midrollPlugin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,o=n.options(),r=o.params,i=o.plugins;if(!1!==r.ads&&(i.kinghubAdmicroADSPlugin||!E.prototype.kinghubAdmicroADSPlugin)){var a=t.position,l=!1;e.agent.isIOS||r.noAdsLoad||!E.prototype.AdsPlayerPlugin||(l=!0),n.one("ready",function(){var e=s.createElement(y,{key:"midrollDisplay",player:n,position:a,preLoad:l});n.container.controlBar.progressControl.progressSlider.addChild(e)})}})})}();/**
 * scrollPlugin - v0.0.1 - 11:45:36 16-04-2021
 * Author: TungTT
 */

!function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],i):i(t.EventPlayerCore)}(this,function(e){"use strict";function t(){document.removeEventListener("click",t),l=!0}function i(){v.map(function(e){try{e.pause()}catch(e){}})}function n(e){v.map(function(t){try{t.id_!==e&&t.pause()}catch(e){}})}var o="default"in e?e.default:e,r=e.playerconfig.DEFAULT,a=void 0,c=!1,d=void 0,l=!1,s=void 0,u=void 0,p=void 0,f=void 0;document.addEventListener("click",t),window.performance?0==performance.navigation.type&&document.referrer&&(l=!0):document.referrer&&(l=!0);var v=[],g=!1;try{window.top!==window.self&&(g=!0)}catch(e){g=!0}o.registerPlugin("scrollPlugin",function(){function t(){if(B&&!E){if(H){if(H.clientHeight&&m)return void o.pause();if(!H.clientHeight&&!m)return void o.pause()}if(T){if(T.clientHeight&&!L)return void o.pause();if(!T.clientHeight&&L)return void o.pause()}var e=void 0,t=void 0;try{e=(t=o.el_.getBoundingClientRect()).top,d.id===o.id_&&(d.position||(d.position=e),c=e>d.position,d.position=e)}catch(e){return}e>window.screen.height/2-t.height&&e<window.screen.height/2&&(a=o.id_),e>0&&e+t.height<window.innerHeight&&(s.id_===o.id_&&(a=o.id_),c||p.id_!==o.id_||(a=o.id_));try{if(g&&window.frameElement.id){var i=window.top.document.getElementById(window.frameElement.id).getBoundingClientRect();i.top<0?i.height+i.top<0&&(a=""):i.top+i.height>window.screen.height&&i.top<window.screen.height&&(a="")}}catch(e){}if(o.id_==a)if(e+t.height/2<0||e+t.height/2>window.innerHeight){if(y)return;o.pause(),a=null,w=!1}else{if(o.trigger("player:viewactive"),w||y)return;l||(o.muted(!0),o.trigger(r.EVENT.USER_CHANGE_MUTE,!0)),n(o.id_),o.play()}else y||(w=!1,o.pause())}}var o=this,h=o.options().params;if(h.scrollenable);else if(e.agent.isMobile||!1===h.scrollplay||"false"===h.scrollplay)return;v.push(o);var m=!0;h.autoplay&&(a=o.id_);var y=!1,w=!1,E=!1,_=o.el_.getBoundingClientRect();s||(s=o,u=_.top),p||(p=o,f=_.top),_.top<u&&(s=o,u=_.top),_.top>f&&(p=o,f=_.top),o.on("user:pause",function(){y=!0}),o.on("site:pause",function(){w=!0}),o.on("play",function(){y=!1,w=!1}),d||(d={id:o.id_}),o.on(r.EVENT.AD_START,function(){o.vastAd.state.vastResponse.ads[0].float&&(E=!0)}),o.on(r.EVENT.AD_END,function(){E=!1}),o.on("play",function(){var e=document.getElementById("overlay-animation");e.classList.add("playing"),o.setTimeout(function(){e.classList.remove("playing")},200)});var R=document.getElementsByClassName("light-box-content"),H=void 0;R&&R[0]&&((H=R[0]).addEventListener("scroll",t),H.clientHeight&&(i(),m=!1));var T=document.getElementById("admCrollNative"),L=!1;T&&(T.addEventListener("scroll",t),T.clientHeight&&(i(),L=!0)),window.addEventListener("scroll",t),setTimeout(t,0);var B=!1;o.on("ready",function(){B=!0})})})}();/**
 * liveCCUPlugin - v1.0.0 - 15:28:51 05-01-2021
 * Author: TuanLDT - thanhtuan.pfiev@gmail.com
 */

!function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],n):n(t.EventPlayerCore,t.vcReact)}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="default"in e?e.default:e,o="default"in t?t.default:t,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(i,o){a.xhr(s({timeout:5e3},t),function(a,s,l){200===s.statusCode?i(l):n&&r<n?e(t,n,++r).then(function(e){i(e)}).catch(function(e){o(e)}):o(a)})})},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e.playerconfig.DEFAULT,p=function(e){function a(e){n(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={views:0,isNative:!0},t.getViewer=t.getViewer.bind(t),t._handePlay=t._handePlay.bind(t),t._handePause=t._handePause.bind(t),t.showCCU=t.showCCU.bind(t),t}return i(a,t.Component),u(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.player,n=e.disableHeader;this.getViewerFirst(),t.on("play",this._handePlay),t.on("pause",this._handePause),n||t.on(c.EVENT.LIVE_VIEW_CCU,this.showCCU)}},{key:"getViewerFirst",value:function(){var e=this,t=this.props.url;t&&l({url:t,method:"GET"}).then(function(t){var n=JSON.parse(t);e.setState({views:n.ccu})})}},{key:"getViewer",value:function(){var e=this,t=this.props.url;t&&!this.busy_&&(this.busy_=!0,l({url:t,method:"GET"}).then(function(t){e.busy_=!1;var n=JSON.parse(t);e.setState({views:n.ccu})}).catch(function(){e.busy_=!1}))}},{key:"_handePlay",value:function(){var e=this.props,t=e.interval,n=e.player;n.clearInterval(this.viewInterval_),this.getViewer(),this.viewInterval_=n.setInterval(this.getViewer,t)}},{key:"_handePause",value:function(){this.props.player.clearInterval(this.viewInterval_)}},{key:"showCCU",value:function(e,t){var n=this.props.player;t?this.state.views!==parseInt(t)&&(this.setState({views:parseInt(t)}),n.off("play",this._handePlay),n.off("pause",this._handePause),n.clearInterval(this.viewInterval_)):this.setState({views:0})}},{key:"render",value:function(){var e=this.state.views;return e&&0!==e?(e>1e6?e=1*(e/1e6).toFixed(2)+"m":e>1e3&&(e=1*(e/1e3).toFixed(1)+"k"),o.createElement("div",{className:"view-controller"},o.createElement("span",{className:"view-number"},e))):null}}]),a}();p.propTypes={disableHeader:e.PropTypes.bool.isRequired,interval:e.PropTypes.number.isRequired,player:e.PropTypes.object.isRequired,url:e.PropTypes.string.isRequired},p.defaultProps={interval:15e3};a.registerPlugin("liveCCUPlugin",function(e){var t=this,n=t.options().params,r=e.url,i=e.interval,a=e.disableHeader;n.liveCCUPlugin&&(r=n.liveCCUPlugin.url,a=n.liveCCUPlugin.disableHeader?n.liveCCUPlugin.disableHeader:a),t.one("loadedmetadata",function(){if(t.options().params.live||t.tech_.isLive()){var e=o.createElement(p,{key:"liveCCUPlugin",url:r,interval:i,player:t,disableHeader:a});t.container.addChild(e)}})})})}();/**
 * kinghubAdmicroADSPlugin - v1.0.0 - 14:22:14 30-11-2020
 * Author: theanh_htp135
 */

!function(){var n=void 0;!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("playercore")):"function"==typeof n&&n.amd?n(["playercore"],e):e(o.EventPlayerCore)}(this,function(n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=(function(){function n(n){this.value=n}function o(o){function e(a,i){try{var r=o[a](i),d=r.value;d instanceof n?Promise.resolve(d.value).then(function(n){e("next",n)},function(n){e("throw",n)}):t(r.done?"return":"normal",r.value)}catch(n){t("throw",n)}}function t(n,o){switch(n){case"return":a.resolve({value:o,done:!0});break;case"throw":a.reject(o);break;default:a.resolve({value:o,done:!1})}(a=a.next)?e(a.key,a.arg):i=null}var a,i;this._invoke=function(n,o){return new Promise(function(t,r){var d={key:n,arg:o,resolve:t,reject:r,next:null};i?i=i.next=d:(a=i=d,e(n,o))})},"function"!=typeof o.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(n){return this._invoke("next",n)},o.prototype.throw=function(n){return this._invoke("throw",n)},o.prototype.return=function(n){return this._invoke("return",n)}}(),""),t=0,a=!1,i=0,r=-1,d="",c=-1,h=-1;try{void 0!==window.admtvcPgid&&(d=window.admtvcPgid())}catch(n){}var v=void 0;try{v=top.document.URL}catch(n){v=document.referrer?document.referrer:location.href}n.registerPlugin("kinghubAdmicroADSPlugin",function(n){function s(n){for(var o=window.location.search.substring(1).split("&"),e=0;e<o.length;e++){var t=o[e].split("=");if(t[0]==n)return t[1]}return!1}var u=this;try{void 0!==window._chkPrLink&&(a=window._chkPrLink)}catch(n){}if("undefined"!=u.mediaInfo.vast&&""!=u.mediaInfo.vast&&void 0!=u.mediaInfo.vast)return decodeURIComponent(u.mediaInfo.vast);var p=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(p=!0)}catch(n){p=!0}h=n.position;var m=[];m.dantri=5939,m.kenh14=5938,m.genk=5940,m.gamek=475198,m.afamily=5942,m.autopro=5944,m.cafef=5943,m.linkhay=5941,m.giadinh=5945,m[71]=2657,m.sohanews=5818,m.soha=5818,m.channelvn=2657,m.cafebiz=5943,m.vcmedia="vcmedia",m.thegioivanhoa=6703,m.phim14=7692,m["beta.autopro"]=5944,m.vtv=23260,m.ttvn=25438,m.thanhnien=37079,m.docbao=7493,m.thethaovanhoa=502991,m.anninhthudo=16834,m.bongda24h=32159,m.bongdanet=11227,m.laodong=10698,m.vtc=6300,m.tuoitre=488052,m.webtretho=501452,m.toquoc=512260,m.thethao247=514470,m.sport5=508721;var l=[];l.webtretho=501451,l.kenh14=2656,l.dantri=2657,l.autopro=2760,l.afamily=2763,l.genk=2658,l.gamek=475197,l.cafef=2661,l.cafebiz=2661,l.giadinh=2971,l.libero=4298,l.nld=2790,l.phapluattp=2787,l.phapluattp=2787,l.sannhac=2762,l.socnhi=3034,l.sohanews=2761,l.soha=2761,l.suckhoedoisong=2972,l.vneconomy=3385,l["beta.autopro"]=2760,l.vtv=6301,l.ttvn=25437,l.thanhnien=37079,l.docbao=7493,l.thethaovanhoa=502990,l.anninhthudo=16834,l.bongda24h=32159,l.bongdanet=11227,l.laodong=10698,l.ole=42329,l.go=42341,l.tintuc=42331,l.lichthidau=42334,l.docbaogiay=42337,l.vntinnhanh=42338,l.tuoitre=488051,l.ale=42340,l.bongda=42333,l.vtc=6300,l.sggp=475266,l.saigondautu=477879,l.sggpnews=477878,l.toquoc=512259,l.thethao247=514469,l.sport5=508720;var f=new function(){this.creatInfo=function(){var n=location.hostname;if(p)try{n=v.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(o){n=location.ancestorOrigins[0]}n=n.replace("http://",""),n=n.replace("https://",""),n=n.replace("http://www",""),n=n.replace("https://www",""),n=n.replace(".com",""),n=n.replace(".vn",""),n=n.replace(".net",""),n=n.replace(".org",""),n=n.replace(".info","");var o=(n=n.replace(".edu","")).split(".");o.length>1&&(n=o[1]),this.getZoneID=function(n){var o=document.domain;return u.mediaInfo.isMobile?"worldcup.dantri.com.vn"==o?"493141":"worldcup.kenh14.vn"==o?"493143":"worldcup.soha.vn"==o?"493145":"worldcup.vtv.vn"==o?"493147":"worldcup.tienphong.vn"==o?"493149":"herewego.kenh14.vn"==o?"500992":m[n]?m[n]:"0":"herewego.kenh14.vn"==o?"500991":"worldcup.dantri.com.vn"==o?"493140":"worldcup.kenh14.vn"==o?"493142":"worldcup.soha.vn"==o?"493144":"worldcup.vtv.vn"==o?"493146":"worldcup.tienphong.vn"==o?"493148":l[n]?l[n]:"0"},void 0!==u.mediaInfo._admParamTvc&&""!=u.mediaInfo._admParamTvc?this.admParam=u.mediaInfo._admParamTvc:this.admParam="0;0;0;0",this.zoneId=this.getZoneID(n),void 0!==u.mediaInfo.tag&&""!=u.mediaInfo.tag&&(this.tag=u.mediaInfo.tag),void 0!==u.mediaInfo.vid&&""!=u.mediaInfo.vid?this.videoID=u.mediaInfo.vid:this.videoID=u.mediaInfo.file,void 0!==u.mediaInfo.domain&&""!=u.mediaInfo.domain?this.domain=u.mediaInfo.domain:this.domain=v.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2],void 0!==u.mediaInfo.pathname&&""!=u.mediaInfo.pathname?this.pathname=u.mediaInfo.pathname:this.pathname=v.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3],this.domainPath=v.split("//")[1]}};if(u.mediaInfo.pid&&(r=u.mediaInfo.pid),"undefined"==u.mediaInfo.replay||!u.mediaInfo.replay||0!=i||u.mediaInfo.boxVideoID){if(0!=i||!u.mediaInfo.nopre)return function(){function n(){return void 0!==u.mediaInfo.vast?(i={url:decodeURIComponent(u.mediaInfo.vast)}).url:0==a?(p=p.split(";"),0==(v=p[0])&&(v=-1),l&&(v=549606),0!=s("_bid")&&(v=s("_bid")),"herewego.kenh14.vn"==location.hostname?null:("wechoice.vn"==location.hostname&&(v=547775),-1!=location.href.indexOf("vtv.vn/trong-nuoc")?null:(i={url:"//sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(f.domainPath)+"&z="+f.zoneId+"&p=1&w=650&h=300"+d+"&pid="+r+"&tags="+t+"&adstype="+h+"&vtype="+c+"&vid="+encodeURIComponent(u.mediaInfo.vid)+"&bannerlimit="+m+"&bannerid="+v+"&ord="+Date.now()}).url)):void 0}var i,v,p="";f.creatInfo();var m=5;p=f.admParam,""!=e&&null!=e&&(p=e),void 0!=o(u.options().params.vtype)&&null!=u.options().params.vtype&&""!=u.options().params.vtype&&(c=u.options().params.vtype),f.tag||void 0!==f.tag?t=f.tag:(t=0,u.on("updateMediaInfo",function(){t=u.mediaInfo.tag}));var l=!1;return void 0!==u.mediaInfo.isads&&"false"==u.mediaInfo.isads?"":u.mediaInfo.isMobile?(p=p.split(";"),0==(v=p[0])&&(v=-1),l&&(v=549606),0!=a?void(t=0):(0!=s("_bid")&&(v=s("_bid")),"herewego.kenh14.vn"==location.hostname?null:("wechoice.vn"==location.hostname&&(v=547775),-1!=location.href.indexOf("vtv.vn/trong-nuoc")?null:(i={url:"//sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(f.domainPath)+"&z="+f.zoneId+"&p=1&w=650&h=300"+d+"&pid="+r+"&tags="+t+"&adstype="+h+"&vtype="+c+"&vid="+encodeURIComponent(u.mediaInfo.vid)+"&bannerlimit="+m+"&bannerid="+v+"&ord="+Date.now()},void 0!==u.mediaInfo.vast&&(i={url:decodeURIComponent(u.mediaInfo.vast)}),i.url)))):n()}();i=1}else i=1})})}();/**
 * countdownPlugin - v1.0.0 - 14:21:15 30-11-2020
 * Author: tungtm
 */

!function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],n):n(t.EventPlayerCore,t.vcReact)}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="default"in e?e.default:e,l="default"in t?t.default:t,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=e.playerconfig.DEFAULT,d=function(a){function d(e){n(this,d);var t=o(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e));t.state={secondsRemaining:3,countdowned:!1,isCountdowning:!1};var i=t.props.player;return t.countdownRemaining=t.countdownRemaining.bind(t),t.onHover=t.onHover.bind(t),t.onOutHover=t.onOutHover.bind(t),t.handleClick=t.handleClick.bind(t),t.handlePlay=t.handlePlay.bind(t),t.handleResize=t.handleResize.bind(t),t.dispose=t.dispose.bind(t),t.oriPause=i.pause.bind(i),t.oriPlay=i.play.bind(i),t.isCountdowning_=!1,t}return i(d,t.Component),r(d,[{key:"componentWillMount",value:function(){var e=this.props.player,t=this;e.on("play",this.handlePlay),e.on("timeupdate",this.handlePlay),e.one(c.EVENT.AD_START,this.dispose),window.addEventListener("resize",this.handleResize),e.play=function(){t.state.countdowned?t.onCountdownSucess():t.countdownRemaining()},e.pause=function(){t.oriPause(),t.clearCountdown()},e.options().params.autoplay&&this.countdownRemaining()}},{key:"dispose",value:function(){var e=this.props.player;clearInterval(this.checkPlay),e.off("play",this.handlePlay),e.off("timeupdate",this.handlePlay),e.vastAd||(e.play=this.oriPlay,e.pause=this.oriPause),e.removeClass("player-play-countdown"),this.setState({countdowned:!0})}},{key:"handleResize",value:function(){this.setState({resize:!0})}},{key:"componentWillUnmount",value:function(){clearInterval(this.checkPlay)}},{key:"handlePlay",value:function(){var t=this.props.noCountDown;this.state.countdowned||this.props.player.paused()||(e.agent.isMobile||t?this.setState({countdowned:!0}):this.countdownRemaining())}},{key:"clearCountdown",value:function(){clearInterval(this.checkPlay),this.isCountdowning_=!1,this.setState({isCountdowning:!1,secondsRemaining:3})}},{key:"countdownRemaining",value:function(){if(this.oriPause(),!this.isCountdowning_){var e=this,t=this.props.noCountDown;this.isCountdowning_=!0,this.props.player.addClass("player-play-countdown"),this.checkPlay=setInterval(function(){e.setState({secondsRemaining:e.state.secondsRemaining-1}),0===e.state.secondsRemaining&&e.onCountdownSucess()},500),this.setState({isCountdowning:!0}),t&&this.onCountdownSucess()}}},{key:"onHover",value:function(){this.countdownRemaining()}},{key:"onOutHover",value:function(){this.clearCountdown()}},{key:"onCountdownSucess",value:function(){var e=this.props.player;clearInterval(this.checkPlay),e.off("play",this.handlePlay),e.off("timeupdate",this.handlePlay),e.play=this.oriPlay,e.pause=this.oriPause,e.removeClass("player-play-countdown"),e.play(),this.setState({countdowned:!0})}},{key:"handleClick",value:function(){this.onCountdownSucess()}},{key:"render",value:function(){var t=this.props.noCountDown;if(this.state.countdowned)return null;var n=this.props.player,o=void 0,i=void 0,a=void 0,r=void 0;if(e.agent.isMobile||t)o="none";else{var c=this.state.isCountdowning;o=c?"block":"none",i=c?"none":"block",a=c?"0.6":"",r=c?"black":""}var d=n.el_.getBoundingClientRect().height/2-15,u=n.el_.getBoundingClientRect().width,p=d;u>1e3&&(p+=.05*(u-1e3));var h={};return e.agent.isMobile||n.options().params.autoplay||t||(h={onMouseEnter:this.onHover,onMouseLeave:this.onOutHover}),l.createElement("div",s({},h,{className:"EventPlayer-countdown",onClick:this.handleClick}),l.createElement("div",{className:"EventPlayer-countdown-background",style:{background:r,opacity:a}}),l.createElement("div",{className:"EventPlayer-loading-vid-icon",style:{display:i,top:d}},l.createElement("div",{className:"EventPlayer-countdown-play-icon",style:{borderTopWidth:n.el_.getBoundingClientRect().width/28.5,borderTopStyle:"solid",borderTopColor:"transparent",borderBottomWidth:n.el_.getBoundingClientRect().width/28.5,borderBottomStyle:"solid",borderBottomColor:"transparent",borderLeftWidth:n.el_.getBoundingClientRect().width/18,borderLeftStyle:"solid",borderLeftColor:"white"}})),l.createElement("div",{className:"EventPlayer-loading-vid-countdown quickspin",style:{display:o}},l.createElement("div",{className:"EventPlayer-countdown-label",style:{fontSize:n.el_.getBoundingClientRect().height/28.5,top:n.el_.getBoundingClientRect().height/2-n.el_.getBoundingClientRect().height/9}},"Tự động phát sau"),l.createElement("div",{className:"EventPlayer-countdown-circle",style:{boxShadow:"inset 0 0 0 "+n.el_.getBoundingClientRect().width/160+"px rgba(255, 255, 255, 0.1)",top:d}}),l.createElement("div",{className:"EventPlayer-countdown-spin",style:{top:d}},l.createElement("div",{className:"EventPlayer-countdown-line-mask",style:{transformOrigin:n.el_.getBoundingClientRect().width/13.33+"px "+n.el_.getBoundingClientRect().width/13.33+"px"}},l.createElement("div",{className:"EventPlayer-countdown-line",style:{width:n.el_.getBoundingClientRect().width/6.67,height:n.el_.getBoundingClientRect().width/6.67,boxShadow:"inset 0 0 0 "+n.el_.getBoundingClientRect().width/160+"px rgba(255, 255, 255, 0.5)"}}))),l.createElement("div",{className:"EventPlayer-countdown-number",style:{fontSize:n.el_.getBoundingClientRect().width/16.67,top:p}},this.state.secondsRemaining)))}}]),d}();d.propTypes={player:e.PropTypes.object.isRequired,className:e.PropTypes.string,noCountDown:e.PropTypes.bool};a.registerPlugin("countdownPlugin",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=e.noCountDown,o=e.skipLabel,i=t.options().params,a=i.label,s=i.filler;a&&o.includes(a)||!1!==s&&t.on("ready",function(){if(!(t.el_.getBoundingClientRect().width<=200)){var e=l.createElement(d,{key:"countdown",player:t,noCountDown:n});t.container.addChild(e,2)}})})})}();/**
 * kinghubAdmicroAPIPlugin - v1.0.0 - 14:22:36 30-11-2020
 * Author: theanh_htp135
 */

!function(){var n=void 0;!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("playercore")):"function"==typeof n&&n.amd?n(["playercore"],o):o(e.EventPlayerCore)}(this,function(n){"use strict";(n=n&&n.hasOwnProperty("default")?n.default:n).registerPlugin("kinghubAdmicroAPIPlugin",function(){var n=this,e=!1,o=!1,i=!1,t=new function(){this.sendLog=function(e){var o,i=0;o="vtv.vn"==n.mediaInfo.domain&&n.mediaInfo.isMobile?"m.vtv.vn":n.mediaInfo.domain;var t=e+";",a="0;0;0;0;0;0;0;"+(i=n.mediaInfo.vid&&"0"!=n.mediaInfo.vid?n.mediaInfo.vid:n.mediaInfo.file)+";0;"+(o||null);a+="|"+(n.mediaInfo.tag?n.mediaInfo.tag:0)+";"+location.pathname,(new Image).src="//lg1.logging.admicro.vn/tk?p="+encodeURIComponent(t+a)}};t.sendLog("2");n.on(["play","playing"],function e(){n.off(["play","playing"],e),t.sendLog("-1")}),n.on("timeupdate",function(){!e&&n.currentTime()>=3&&(e=!0,t.sendLog("11")),!o&&n.currentTime()>=20&&(o=!0,t.sendLog("20")),!i&&n.currentTime()/n.duration()>.5&&(i=!0,t.sendLog("12"))}),n.on("endedcontent",function(){t.sendLog("21")})})})}();/**
 * itvcAdPlugin - v1.0.0 - 14:22:55 30-11-2020
 * Author: TuanLDT - thanhtuan.pfiev@gmail.com
 */

!function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore")):"function"==typeof t&&t.amd?t(["playercore"],n):n(e.EventPlayerCore)}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o="default"in t?t.default:t,i=t.playerconfig.DEFAULT,a=function(o){function a(t){e(this,a);var r=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t)),o=r.props.player;return!0!==o.options().params.replay?n(r):(o.on(i.EVENT.AD_RESTORED_PLAYBACK,function(){o.vastAd=null,o.trigger(i.EVENT.AD_ORDER_START_POSTROLL)}),r)}return r(a,t.Plugin),a}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};o.registerPlugin("itvcAdPlugin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new a(c({},t,{player:this}))})})}();/**
 * countlyTrackingPlugin - v1.0.0 - 15:38:44 23-03-2021
 * Author: tungtm
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var i,r=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=0;i<r;i++)if(t.call(n,e[i],i,e))return e[i]}},{}],2:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function c(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=i-n;return a>=0&&s>=0&&{top:n,bottom:i,left:r,right:o,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e,t){for(var n=t;n;){if(n==e)return!0;n=d(n)}return!1}function d(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var h=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(i){var o=i.element,a=l(o),s=this._rootContainsTarget(o),c=i.entry,u=e&&s&&this._computeTargetAndRootIntersection(o,t),d=i.entry=new n({time:r(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:u});c?e&&s?this._hasCrossedThreshold(c,d)&&this._queuedEntries.push(d):c&&c.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var r=l(n),o=d(n),a=!1;!a;){var s=null,u=1==o.nodeType?e.getComputedStyle(o):{};if("none"==u.display)return;if(o==this.root||o==t?(a=!0,s=i):o!=t.body&&o!=t.documentElement&&"visible"!=u.overflow&&(s=l(o)),s&&!(r=c(s,r)))break;o=d(o)}return r}},i.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||u(t,this.root)},i.prototype._rootContainsTarget=function(e){return u(this.root||t,e)},i.prototype._registerInstance=function(){h.indexOf(this)<0&&h.push(this)},i.prototype._unregisterInstance=function(){var e=h.indexOf(this);-1!=e&&h.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:e.clientWidth||-1,elementHeight:e.clientHeight||-1,iframeContext:r(),focus:i()}};var i=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(r()===o.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},r=n.iFrameContext=function(){try{if(window.top===window)return o.ON_PAGE;for(var e=window;e.parent!==e;){if(e.parent.document.domain!==e.document.domain)return o.CROSS_DOMAIN_IFRAME;e=e.parent}o.SAME_DOMAIN_IFRAME}catch(e){return o.CROSS_DOMAIN_IFRAME}},o=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(e,t,n){"use strict";e("array-find")},{"array-find":1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Measurement/MeasurementTechniques/BaseTechnique")),o=(n.validTechnique=function(e){return"function"==typeof e&&Object.getOwnPropertyNames(r.default).reduce(function(t,n){return n&&i(e[t])===i(r.default[t])},!0)},n.validElement=function(e){return e&&e.toString().indexOf("Element")>-1},n.validateCriteria=function(e){var t=e.inViewThreshold,n=e.timeInView,i=!1,r=[];return("number"!=typeof t||t>1)&&(i=!0,r.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(i=!0,r.push("timeInView must be a number greater to or equal 0")),{invalid:i,reasons:r.join(" | ")}});n.validateStrategy=function(e){var t=e.autostart,n=e.techniques,i=e.criteria,r=!1,a=[];"boolean"!=typeof t&&(r=!0,a.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(r=!0,a.push("techniques must be an array containing atleast on measurement techniques"));var s=o(i);return s.invalid&&(r=!0,a.push(s.reasons)),{invalid:r,reasons:a.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../Timing/InViewTimer")),c=e("./Strategies/"),l=e("../Helpers/Validators"),u=i(e("../Environment/Environment")),d=i(e("./Events")),h=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=t,this._strategy=o({},c.DEFAULT_STRATEGY,i),this._criteriaMet=!1;var a=(0,l.validateStrategy)(this._strategy);if(a.invalid)throw a.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(d.UNMEASUREABLE,u.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return a(e,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(e){return this._addCallback(e,d.START)}},{key:"onViewableStop",value:function(e){return this._addCallback(e,d.STOP)}},{key:"onViewableChange",value:function(e){return this._addCallback(e,d.CHANGE)}},{key:"onViewableComplete",value:function(e){return this._addCallback(e,d.COMPLETE),this.criteriaMet&&this._techniqueChange(d.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(e){return this._addCallback(e,d.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(d.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(e){return e.filter(l.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(e){return!e.unmeasureable})}},{key:"_instantiateTechnique",value:function(e){return new e(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(e){e&&(e.onInView(this._techniqueChange.bind(this,d.INVIEW,e)),e.onChangeView(this._techniqueChange.bind(this,d.CHANGE,e)),e.onOutView(this._techniqueChange.bind(this,d.OUTVIEW,e)))}},{key:"_techniqueChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,i=this._appendEnvironment(t);switch(e){case d.INVIEW:this._criteriaMet||(this.timer=new s.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,t)),this.timer.start(),n=d.START);break;case d.CHANGE:n=e;break;case d.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=e);break;case d.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=d.STOP);break;case d.UNMEASUREABLE:n=d.UNMEASUREABLE}n&&this._publish(n,i)}},{key:"_publish",value:function(e,t){Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(e){return e(t)})}},{key:"_timerElapsed",value:function(e){this._techniqueChange(d.COMPLETE,e)}},{key:"_addCallback",value:function(e,t){if(this._listeners[t]&&"function"==typeof e)this._listeners[t].push(e);else if("function"!=typeof e)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(e){return o({},{percentViewable:void 0===e.percentViewable?-1:e.percentViewable,technique:e.techniqueName||-1,viewable:void 0===e.viewable?-1:e.viewable},u.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),e}();n.default=h,t.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return r(e,[{key:"onInView",value:function(e){return this.addCallback(e,"inView")}},{key:"onChangeView",value:function(e){return this.addCallback(e,"changeView")}},{key:"onOutView",value:function(e){return this.addCallback(e,"outView")}},{key:"addCallback",value:function(e,t){if("function"==typeof e&&this.listeners[t])this.listeners[t].push(e);else if("function"!=typeof e)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),e}();n.default=o,t.exports=n.default},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTechnique")),c=e("../../Helpers/Validators"),l=e("../Strategies/"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DEFAULT_STRATEGY.criteria;i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(void 0!==n&&e)o.element=e,o.criteria=n,o.inView=!1,o.started=!1,o.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===o.notificationLevels.indexOf(o.criteria.inViewThreshold)&&o.notificationLevels.push(o.criteria.inViewThreshold);else if(!e)throw"element not provided";return o}return o(t,s.default),a(t,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(e){e&&e.length&&void 0!==e[0].intersectionRatio&&(this.percentViewable=e[0].intersectionRatio,e[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(e){return e()})),e[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(e){return e()})),this.listeners.changeView.forEach(function(e){return e()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,c.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),t}();n.default=u,t.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=i(e("./IntersectionObserver")),l=(i(e("intersection-observer")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../Environment/Environment"))),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c.default),s(t,[{key:"unmeasureable",get:function(){return l.iFrameContext()===l.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),t}();n.default=u,t.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return i(r).default}});var o=e("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return i(o).default}});var a=e("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return i(a).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var r=i(e("../../Helpers/Validators")),o=i(e("../MeasurementTechniques/")),a=i(e("../../Options/ViewabilityCriteria")),s=n.DEFAULT_STRATEGY={autostart:!0,techniques:[o.IntersectionObserver,o.IntersectionObserverPolyfill],criteria:a.MRC_VIDEO};n.StrategyFactory=function(){var e={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.criteria},t=r.validateStrategy(e);if(t.invalid)throw t.reasons;return e}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e("./Helpers/Polyfills.js");var s=r(e("./Measurement/Events")),c=i(e("./Timing/InViewTimer")),l=r(e("./Measurement/Strategies/")),u=(r(e("./Environment/Environment")),i(e("./Measurement/MeasurementExecutor"))),d=r(e("./Options/ViewabilityCriteria")),h=r(e("./Measurement/MeasurementTechniques/")),f=function(){function e(){o(this,e),this.executors=[]}return a(e,[{key:"measureElement",value:function(e,t){var n=new u.default(e,t);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(e){return e.dispose()})}}]),e}();n.default=f,f.ViewabilityCriteria=d,f.MeasurementExecutor=u.default,f.MeasurementTechniques=h,f.InViewTimer=c.default,f.Strategies=l,f.Events=s,t.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.duration=t,this.listeners=[],this.completed=!1}return r(e,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(e){return e()})}},{key:"elapsed",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),e}();n.default=o,t.exports=n.default},{}]},{},[13])(13)}),function(){var e=void 0;this.vcReact=this.vcReact?this.vcReact:this.React,function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],n):n(t.EventPlayerCore)}(this,function(t){"use strict";function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function i(e,t,n){var i=e.options().params,r=[];n.on("hlsFragBuffered",function(n,o){t({name:"vtlplayvideo",state:"buffering",quanlity:r[o.frag.level]+"p",transfer_data:o.frag.loaded,vid:i.file||i.v||i.vid||e.src()})}),n.on("hlsManifestParsed",function(e,t){t.levels.forEach(function(e){r.push(e.height)})})}function r(e,t,n){var i=e.options().params;n.on("fragmentLoadingCompleted",function(r){var o=r.request.mediaType,a=r.request.bytesTotal,s=n.getBitrateInfoListFor("video")||[],c="video"===o?s[r.request.quality].height:0;t({name:"vtlplayvideo",state:"buffering",quanlity:c+"p",transfer_data:a,vid:i.file||i.v||i.vid||e.src()})})}function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}var s,c,l,u,d="default"in t?t.default:t,h=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},f="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p=n(function(e,t){!function(n){var i=t,r=e&&e.exports==i&&e,o="object"==typeof f&&f;o.global!==o&&o.window!==o||(n=o);var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n=e.length%3,i="",r=-1,o=e.length-n;++r<o;)t=(e.charCodeAt(r)<<16)+(e.charCodeAt(++r)<<8)+e.charCodeAt(++r),i+=c.charAt(t>>18&63)+c.charAt(t>>12&63)+c.charAt(t>>6&63)+c.charAt(63&t);return 2==n?(t=(e.charCodeAt(r)<<8)+e.charCodeAt(++r),i+=c.charAt(t>>10)+c.charAt(t>>4&63)+c.charAt(t<<2&63)+"="):1==n&&(t=e.charCodeAt(r),i+=c.charAt(t>>2)+c.charAt(t<<4&63)+"=="),i},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,o="",a=-1;++a<t;)i=c.indexOf(e.charAt(a)),n=r%4?64*n+i:i,r++%4&&(o+=String.fromCharCode(255&n>>(-2*r&6)));return o},version:"1.0.0"};if(i&&!i.nodeType)if(r)r.exports=u;else for(var d in u)u.hasOwnProperty(d)&&(i[d]=u[d]);else n.base64=u}(f)}),v=function(e){var t=void 0;if(window.__playerSecure__){for(var n in window.__playerSecure__)if("EventPlayer"===window.__playerSecure__[n].playerName){t=n;break}}else t=e.options().secure;var i=p.decode(t);return(i=i.substr(i.indexOf("verify")+7)).substr(0,i.indexOf("/"))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=(function(){function e(e){this.value=e}function t(t){function n(r,o){try{var a=t[r](o),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):o=null}var r,o;this._invoke=function(e,t){return new Promise(function(i,a){var s={key:e,arg:t,resolve:i,reject:a,next:null};o?o=o.next=s:(r=o=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},k=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},E=t.playerconfig.DEFAULT,T=(c=s=function(e){function t(e){_(this,t);var n=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={bitreceives:[]};var i=n.props.player;return n._handePollAdStart=n._handePollAdStart.bind(n),n._handlePollAdEnded=n._handlePollAdEnded.bind(n),n._handleTimeUpdate=n._handleTimeUpdate.bind(n),n.startPoll=n.startPoll.bind(n),n.stopPoll=n.stopPoll.bind(n),n._updatePoll=n._updatePoll.bind(n),i.on("play",n.startPoll),i.on("pause",n.stopPoll),i.on("ended",n.stopPoll),i.on("timeupdate",n._handleTimeUpdate),i.on(E.EVENT.AD_START,n._handePollAdStart),i.on(E.EVENT.AD_END,n._handlePollAdEnded),n}return w(t,e),g(t,[{key:"_handePollAdStart",value:function(){var e=this.props.player;e.off("play",this.startPoll),e.off("timeupdate",this._handleTimeUpdate),this.stopPoll()}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.on("timeupdate",this._handleTimeUpdate),e.on("play",this.startPoll)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player,t=void 0;try{t=e.tech_.el_.videoHeight}catch(e){return}this.state.last_video_height!==t&&this.setState({last_video_height:t})}},{key:"startPoll",value:function(){this.pollInterval&&this.stopPoll(),this.pollInterval=setInterval(this._updatePoll,this.props.pollInterval)}},{key:"stopPoll",value:function(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}},{key:"_updatePoll",value:function(){(0,this.props.track)({startp:"",seekp:"",state:"playing",name:"vtlplayvideo"})}}]),t}(t.Plugin),s.defaultProps={pollInterval:1e3},c),x=function(e,t){new T({player:e,track:t})},O=t.playerconfig.DEFAULT,S=(u=l=function(e){function t(e){_(this,t);var n=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=n.props.player;return n.trackStats=n.trackStats.bind(n),n.getStats=n.getStats.bind(n),n._handePollAdStart=n._handePollAdStart.bind(n),n._handlePollAdEnded=n._handlePollAdEnded.bind(n),n._handleAdSkip=n._handleAdSkip.bind(n),i.on(O.EVENT.VAST_AD_START,n._handePollAdStart),i.on(O.EVENT.VPAID_AD_IMPRESSION,n._handePollAdStart),i.on(O.EVENT.AD_SKIP,n._handleAdSkip),i.on(O.EVENT.AD_END,n._handlePollAdEnded),n}return w(t,e),g(t,[{key:"_handleAdSkip",value:function(){var e=this.props,t=e.track,n=e.player;t({state:"skip",name:"vtlplayvideoads",vdu:this.state.adDuration,vid:n.src(),ref:n.vastAd.snapshot().src})}},{key:"_handePollAdStart",value:function(){var e=this.props.player;this.pausedAd_=!1,this.trackStatsInterval_=e.setInterval(this.trackStats,this.props.trackInterval),this.getStatsInterval_=e.setInterval(this.getStats,this.props.statsInterval)}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.clearInterval(this.trackStatsInterval_),e.clearInterval(this.getStatsInterval_),this.state={}}},{key:"getStats",value:function(){var e=this,t=this.props.player,n=this.state.adDuration,i=t.vastAd.adUnit(),r=!1;try{r=t.vastAd.paused(),this.setState({apaused:r?1:0})}catch(e){}n||i.getAdDuration().then(function(t){e.setState({adDuration:t})})}},{key:"trackStats",value:function(){var e=this.props,t=e.track,n=e.player,i=this.state,r=i.adDuration,o=i.apaused;r&&(o||t({state:"playing",name:"vtlplayvideoads",vdu:r,vid:n.src(),ref:n.vastAd.snapshot().src}))}}]),t}(t.Plugin),l.defaultProps={trackInterval:1e3,statsInterval:200},u),I=function(e,t){new S({player:e,track:t})},A={load:1,play:2,replay:3,pause:4,resume:5,fullscreen:6,normalscreen:7,firstQuartile:8,midpoint:9,thirdQuartile:10,endedcontent:11,changeQuality:12,poll:14,close:15,user_change_quality:16,auto_change_quality:17,current_resolution_change:18,error:20,waiting:21,adstart:22,"bit-receive":23,timetostart:24,adpoll:25,pausedAd:26},C=t.playerconfig.DEFAULT,P="EventPlayer",M=function(e,t){function n(){e.one(C.EVENT.PLAYER_WARNING,function(i,r){var o=e.options().params;t({name:"vtlplayvideoerror",error_code:114,error_message:r.message,params:o,vid:o.file||o.v||o.vid||e.src(),src:e.src()||o.file}),setTimeout(function(){n()},3e3)})}var i=e.options().params;e.on(C.EVENT.PLAYER_ERROR,function(n,r){t({name:"vtlplayvideoerror",error_code:r.code,error_message:r.msg,vid:i.file||i.v||i.vid||e.src(),src:e.src()||i.file})}),e.one("play",function(){e.setTimeout(function(){var n=e.currentTime();e.paused()||0!==n||t({evt:A.error,err:2})},1e4)}),e.on("player:hlserror",function(n,r){t({name:"vtlplayvideoerror",error_code:r.code,error_message:r.msg,vid:i.file||i.v||i.vid||e.src(),src:e.src()||i.file})}),e.on("hlsTechInit",function(n,r){r.on("hlsError",function(n,r){"networkError"===r.type&&r.url&&t({name:"vtlplayvideoerror",error_code:108,error_message:"networkError",vid:i.file||i.v||i.vid||e.src(),src:r.url,statusCode:r.response?r.response.code:void 0,details:r.details})})}),e.on("dashTechInit",function(n,r){r.on("error",function(n){var r=n.error,o=r.code,a=r.message,s=void 0;o<=114&&o>=10?s="networkError":200===o||201===o?s="MSS errors":o>=11e3&&o<=11013&&(s="Offline errors"),t({name:"vtlplayvideoerror",error_code:o,error_message:s,vid:i.file||i.v||i.vid||e.src(),details:a})})}),n(),i.live||window.addEventListener("error",function(n){"error"===n.type&&(n.filename.indexOf(P)<0||t({name:"vtlplayvideoerror",error_code:113,error_message:n.error.message,vid:i.file||i.v||i.vid||e.src(),src:e.src()||i.file}))})},L=n(function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var r=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<e.length;r=++i%4)0!=r&&n.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(i))>>>6-2*r);return n}};e.exports=n}()}),N={utf8:{stringToBytes:function(e){return N.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(N.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},R=N,V=function(e){return null!=e&&(o(e)||a(e)||!!e._isBuffer)},q=n(function(e){!function(){var t=L,n=R.utf8,i=V,r=R.bin,o=function(e,a){e.constructor==String?e=a&&"binary"===a.encoding?r.stringToBytes(e):n.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var s=t.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;for(var p=o._ff,v=o._gg,m=o._hh,y=o._ii,f=0;f<s.length;f+=16){var _=l,g=u,b=d,w=h;u=y(u=y(u=y(u=y(u=m(u=m(u=m(u=m(u=v(u=v(u=v(u=v(u=p(u=p(u=p(u=p(u,d=p(d,h=p(h,l=p(l,u,d,h,s[f+0],7,-680876936),u,d,s[f+1],12,-389564586),l,u,s[f+2],17,606105819),h,l,s[f+3],22,-1044525330),d=p(d,h=p(h,l=p(l,u,d,h,s[f+4],7,-176418897),u,d,s[f+5],12,1200080426),l,u,s[f+6],17,-1473231341),h,l,s[f+7],22,-45705983),d=p(d,h=p(h,l=p(l,u,d,h,s[f+8],7,1770035416),u,d,s[f+9],12,-1958414417),l,u,s[f+10],17,-42063),h,l,s[f+11],22,-1990404162),d=p(d,h=p(h,l=p(l,u,d,h,s[f+12],7,1804603682),u,d,s[f+13],12,-40341101),l,u,s[f+14],17,-1502002290),h,l,s[f+15],22,1236535329),d=v(d,h=v(h,l=v(l,u,d,h,s[f+1],5,-165796510),u,d,s[f+6],9,-1069501632),l,u,s[f+11],14,643717713),h,l,s[f+0],20,-373897302),d=v(d,h=v(h,l=v(l,u,d,h,s[f+5],5,-701558691),u,d,s[f+10],9,38016083),l,u,s[f+15],14,-660478335),h,l,s[f+4],20,-405537848),d=v(d,h=v(h,l=v(l,u,d,h,s[f+9],5,568446438),u,d,s[f+14],9,-1019803690),l,u,s[f+3],14,-187363961),h,l,s[f+8],20,1163531501),d=v(d,h=v(h,l=v(l,u,d,h,s[f+13],5,-1444681467),u,d,s[f+2],9,-51403784),l,u,s[f+7],14,1735328473),h,l,s[f+12],20,-1926607734),d=m(d,h=m(h,l=m(l,u,d,h,s[f+5],4,-378558),u,d,s[f+8],11,-2022574463),l,u,s[f+11],16,1839030562),h,l,s[f+14],23,-35309556),d=m(d,h=m(h,l=m(l,u,d,h,s[f+1],4,-1530992060),u,d,s[f+4],11,1272893353),l,u,s[f+7],16,-155497632),h,l,s[f+10],23,-1094730640),d=m(d,h=m(h,l=m(l,u,d,h,s[f+13],4,681279174),u,d,s[f+0],11,-358537222),l,u,s[f+3],16,-722521979),h,l,s[f+6],23,76029189),d=m(d,h=m(h,l=m(l,u,d,h,s[f+9],4,-640364487),u,d,s[f+12],11,-421815835),l,u,s[f+15],16,530742520),h,l,s[f+2],23,-995338651),d=y(d,h=y(h,l=y(l,u,d,h,s[f+0],6,-198630844),u,d,s[f+7],10,1126891415),l,u,s[f+14],15,-1416354905),h,l,s[f+5],21,-57434055),d=y(d,h=y(h,l=y(l,u,d,h,s[f+12],6,1700485571),u,d,s[f+3],10,-1894986606),l,u,s[f+10],15,-1051523),h,l,s[f+1],21,-2054922799),d=y(d,h=y(h,l=y(l,u,d,h,s[f+8],6,1873313359),u,d,s[f+15],10,-30611744),l,u,s[f+6],15,-1560198380),h,l,s[f+13],21,1309151649),d=y(d,h=y(h,l=y(l,u,d,h,s[f+4],6,-145523070),u,d,s[f+11],10,-1120210379),l,u,s[f+2],15,718787259),h,l,s[f+9],21,-343485551),l=l+_>>>0,u=u+g>>>0,d=d+b>>>0,h=h+w>>>0}return t.endian([l,u,d,h])};o._ff=function(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},o._gg=function(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},o._hh=function(e,t,n,i,r,o,a){var s=e+(t^n^i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},o._ii=function(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+(r>>>0)+a;return(s<<o|s>>>32-o)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=t.wordsToBytes(o(e,n));return n&&n.asBytes?i:n&&n.asString?r.bytesToString(i):t.bytesToHex(i)}}()});!function(t,n){"function"==typeof e&&e.amd?e([],function(){return n(t.Countly)}):"object"===("undefined"==typeof module?"undefined":y(module))&&module.exports?module.exports=n(t.Countly):t.Countly=n(t.Countly)}("undefined"!=typeof window?window:void 0,function(e){function t(e){var t=[];if(void 0!==e.options)for(var n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.options[n].value);return t.join(", ")}function n(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function i(){return Math.floor((new Date).getTime()/1e3)}function r(){var e=(new Date).getTime();return O>=e?O++:O=e,O}function o(t,n,i){if(n&&Object.keys(n).length){if(void 0!==n[t])return n[t]}else if(void 0!==e[t])return e[t];return i}function a(t,n,i){for(var r in e.i)e.i[r].tracking_crashes&&e.i[r].recordError(t,n,i)}function s(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function c(e){return"/"===e.substr(e.length-1)?e.substr(0,e.length-1):e}function l(e,t){for(var n,i={},r=0;r<t.length;r++)void 0!==e[n=t[r]]&&(i[n]=e[n]);return i}function u(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function d(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function h(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function f(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function p(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}function v(e){if(e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function m(e,t,n,i,r,o){var a,s=document.createElement(e);s.setAttribute(t,n),s.setAttribute(i,r),o&&(s.onreadystatechange=s.onload=function(){a||o(),a=!0}),document.getElementsByTagName("head")[0].appendChild(s)}function _(e,t){m("script","type","text/javascript","src",e,t)}function g(e,t){m("link","rel","stylesheet","href",e,t)}function b(){var e=document.getElementById("cly-loader");if(!e){var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),n.appendChild(i),(e=document.createElement("div")).setAttribute("id","cly-loader"),document.body.appendChild(e)}e.style.display="block"}function w(){var e=document.getElementById("cly-loader");e&&(e.style.display="none")}(e=e||{}).features=["sessions","events","views","scrolls","clicks","forms","crashes","attribution","users","star-rating","location","apm","feedback","remote-config"],e.utm={source:!0,medium:!0,campaign:!0,term:!0,content:!0},e.q=e.q||[],e.onload=e.onload||[];var k="20.11.0",E="javascript_native_web",T=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,x=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/;e.CountlyClass=function(m){function O(e){if(!Y.ignore_visitor)if(e.key){e.count||(e.count=1);var t=l(e,["key","count","sum","dur","segmentation"]);t.timestamp=r();var n=new Date;t.hour=n.getHours(),t.dow=n.getDay(),K.push(t),H("cly_event",K),D("Adding event: ",e)}else D("Event must have key property")}function C(){Y.ignore_prefetch&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(Y.ignore_visitor=!0),Y.ignore_bots&&x.test(navigator.userAgent)&&(Y.ignore_visitor=!0)}function P(e,t){try{var n=document.createElement("div");n.className="countly-iframe-wrapper",n.id="countly-iframe-wrapper-"+e._id;var i=document.createElement("span");i.className="countly-feedback-close-icon",i.id="countly-feedback-close-icon-"+e._id,i.innerText="x";var r=document.createElement("iframe");if(r.name="countly-feedback-iframe",r.id="countly-feedback-iframe",r.src=Y.url+"/feedback?widget_id="+e._id+"&app_key="+Y.app_key+"&device_id="+Y.device_id+"&sdk_version="+k,document.body.appendChild(n),n.appendChild(i),n.appendChild(r),S(document.getElementById("countly-feedback-close-icon-"+e._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="none",document.getElementById("cfbg").style.display="none"}),t){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.id="feedback-sticker-svg",o.setAttribute("aria-hidden","true"),o.setAttribute("data-prefix","far"),o.setAttribute("data-icon","grin"),o.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),o.setAttribute("role","img"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("viewBox","0 0 496 512");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.id="smileyPathInStickerSvg",a.setAttribute("fill","white"),a.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var s=document.createElement("span");s.innerText=e.trigger_button_text;var c=document.createElement("div");c.style.color=e.trigger_font_color<7?"#"+e.trigger_font_color:e.trigger_font_color,c.style.backgroundColor=e.trigger_bg_color.length<7?"#"+e.trigger_bg_color:e.trigger_bg_color,c.className="countly-feedback-sticker  "+e.trigger_position+"-"+e.trigger_size,c.id="countly-feedback-sticker-"+e._id,o.appendChild(a),c.appendChild(o),c.appendChild(s),document.body.appendChild(c);var l=document.getElementById("smileyPathInStickerSvg");l&&(l.style.fill=e.trigger_font_color<7?"#"+e.trigger_font_color:e.trigger_font_color),S(document.getElementById("countly-feedback-sticker-"+e._id),"click",function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"})}else document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(e){D("Somethings went wrong while element injecting process: "+e)}}function M(){var e;if(void 0!==Y.onload&&Y.onload.length>0){for(e=0;e<Y.onload.length;e++)"function"==typeof Y.onload[e]&&Y.onload[e](Y);Y.onload=[]}}function L(){if(se){var e={name:se};Y.check_consent("views")&&O({key:"[CLY]_view",dur:Te?i()-ce:le,segmentation:e}),se=null}}function N(){if(ye){var e=H("cly_session");(!e||parseInt(e)<=i())&&(G=!1,Y.begin_session(!oe)),H("cly_session",i()+60*_e)}}function R(e){e.app_key=Y.app_key,e.device_id=Y.device_id,e.sdk_name=E,e.sdk_version=k,Y.check_consent("location")?(Y.country_code&&(e.country_code=Y.country_code),Y.city&&(e.city=Y.city),null!==Y.ip_address&&(e.ip_address=Y.ip_address)):e.location="",e.timestamp=r();var t=new Date;e.hour=t.getHours(),e.dow=t.getDay()}function V(e){Y.ignore_visitor||(Y.app_key&&Y.device_id?(R(e),Z.length>Q&&Z.shift(),Z.push(e),H("cly_queue",Z,!0)):D("app_key or device_id is missing"))}function q(){if(M(),Y.test_mode||Y.ignore_visitor)be=!1;else{be=!0;var t=0;if(W&&void 0!==e.q&&e.q.length>0){var n,r=e.q;for(e.q=[],t=0;t<r.length;t++)if(n=r[t],D("Processing queued call",n),"function"==typeof n)n();else if(Array.isArray(n)&&n.length>0){var o=Y,a=0;if(e.i[n[a]]&&(o=e.i[n[a]],a++),"function"==typeof o[n[a]])o[n[a]].apply(o,n.slice(a+1));else if(0===n[a].indexOf("userData.")){var s=n[a].replace("userData.","");"function"==typeof o.userData[s]&&o.userData[s].apply(o,n.slice(a+1))}else"function"==typeof e[n[a]]&&e[n[a]].apply(e,n.slice(a+1))}}if(G&&oe&&Te){var c=i();c-J>pe&&(Y.session_duration(c-J),J=c)}if(K.length>0){if(K.length<=ve)V({events:JSON.stringify(K)}),K=[];else{var l=K.splice(0,ve);V({events:JSON.stringify(l)})}H("cly_event",K)}if(!we&&Z.length>0&&ge&&i()>ue){ge=!1;var u=Z[0];v(ke)&&(Ie&&(clearTimeout(Ie),Ie=null),u.consent=JSON.stringify(ke),ke={}),D("Processing request",u),H("cly_queue",Z,!0),F(Y.url+X,u,function(e,t){D("Request Finished",t,e),e?ue=i()+de:Z.shift(),H("cly_queue",Z,!0),ge=!0})}setTimeout(q,$)}}function B(){return H("cly_id")||n()}function j(){var e=JSON.parse(JSON.stringify(Y.metrics||{}));if(e._app_version=e._app_version||Y.app_version,e._ua=e._ua||navigator.userAgent,screen.width){var t=screen.width?parseInt(screen.width):0,n=screen.height?parseInt(screen.height):0;if(0!==t&&0!==n){if(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio)t=Math.round(t*window.devicePixelRatio),n=Math.round(n*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var i=t;t=n,n=i}e._resolution=e._resolution||t+"x"+n}}window.devicePixelRatio&&(e._density=e._density||window.devicePixelRatio);var r=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;if(void 0!==r&&(e._locale=e._locale||r),void 0!==document.referrer&&document.referrer.length){var o=T.exec(document.referrer);if(o&&o[11]&&o[11]!==window.location.hostname){var a=!1;if(ie&&ie.length)for(var s=0;s<ie.length;s++)try{if(new RegExp(ie[s]).test(document.referrer)){D("Ignored:",document.referrer),a=!0;break}}catch(e){D("Problem with regex",ie[s])}a||(e._store=e._store||document.referrer)}}return D("Got metrics",e),e}function D(){Y.debug&&"undefined"!=typeof console&&(arguments[1]&&"object"===y(arguments[1])&&(arguments[1]=JSON.stringify(arguments[1])),W||(arguments[0]="["+Y.app_key+"] "+arguments[0]))}function F(e,t,n){try{D("Sending XML HTTP request");var i=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null,r=s(t=t||{}),o="GET";(Y.force_post||r.length>=2e3)&&(o="POST"),"GET"===o?i.open("GET",e+"?"+r,!0):(i.open("POST",e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"));for(var a in Y.headers)i.setRequestHeader(a,Y.headers[a]);i.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<300?"function"==typeof n&&n(!1,t,this.responseText):4===this.readyState&&(D("Failed Server XML HTTP request",this.status),"function"==typeof n&&n(!0,t))},"GET"===o?i.send():i.send(r)}catch(e){D("Failed XML HTTP request",e),"function"==typeof n&&n(!0,t)}}function U(e){H("cly_token",e)}function H(e,t,n,i){function r(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString();document.cookie=e+"="+t+r+"; path=/"}i||(e=Y.app_key+"/"+e,Y.namespace&&(e=c(Y.namespace)+"/"+e)),n=n||!1;var o,a=!1;a=!0;try{"undefined"!=typeof localStorage&&localStorage.setItem("testLocal",!0)}catch(e){a=!1}if(void 0!==t&&null!==t&&(t=Y.serialize(t),a?localStorage.setItem(e,t):n||r(e,t,30)),void 0===t)return a?o=localStorage.getItem(e):n||(o=function(t){for(var n=e+"=",i=document.cookie.split(";"),r=0,o=i.length;r<o;r++){for(var a=i[r];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null}()),Y.deserialize(o);null===t&&(a?localStorage.removeItem(e):n||r(e,"",-1))}function z(){if(H(Y.namespace+"cly_id",void 0,!1,!0)){H("cly_id",H(Y.namespace+"cly_id",void 0,!1,!0)),H("cly_event",H(Y.namespace+"cly_event",void 0,!1,!0)),H("cly_session",H(Y.namespace+"cly_session",void 0,!1,!0));var e=H(Y.namespace+"cly_queue",void 0,!1,!0);Array.isArray(e)&&H("cly_queue",e=e.filter(function(e){return e.app_key===Y.app_key})),H(Y.namespace+"cly_cmp_id",void 0,!1,!0)&&(H("cly_cmp_id",H(Y.namespace+"cly_cmp_id",void 0,!1,!0)),H("cly_cmp_uid",H(Y.namespace+"cly_cmp_uid",void 0,!1,!0))),H(Y.namespace+"cly_ignore",void 0,!1,!0)&&H("cly_ignore",H(Y.namespace+"cly_ignore",void 0,!1,!0)),H("cly_id",null,!1,!0),H("cly_event",null,!1,!0),H("cly_session",null,!1,!0),H("cly_queue",null,!1,!0),H("cly_cmp_id",null,!1,!0),H("cly_cmp_uid",null,!1,!0),H("cly_ignore",null,!1,!0)}}for(var J,Y=this,W=!e.i,G=!1,X="/i",$=o("interval",m,500),Q=o("queue_size",m,1e3),Z=[],K=[],ee={},te=[],ne={},ie=o("ignore_referrers",m,[]),re=null,oe=!0,ae=0,se=null,ce=0,le=0,ue=0,de=o("fail_timeout",m,60),he=o("inactivity_time",m,20),fe=0,pe=o("session_update",m,60),ve=o("max_events",m,10),me=o("max_logs",m,100),ye=o("use_session_cookie",m,!0),_e=o("session_cookie_timeout",m,30),ge=!0,be=!1,we=o("offline_mode",m,!1),ke={},Ee={},Te=!0,xe=i(),Oe={},Se=0;Se<e.features.length;Se++)Oe[e.features[Se]]={};this.initialize=function(){if(this.serialize=m.serialize||e.serialize,this.deserialize=m.deserialize||e.deserialize,this.getViewName=m.getViewName||e.getViewName,this.getViewUrl=m.getViewUrl||e.getViewUrl,this.namespace=o("namespace",m,""),this.app_key=o("app_key",m,null),this.onload=o("onload",m,[]),this.utm=o("utm",m,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),this.ignore_prefetch=o("ignore_prefetch",m,!0),this.debug=o("debug",m,!1),this.test_mode=o("test_mode",m,!1),this.metrics=o("metrics",m,{}),this.headers=o("headers",m,{}),this.url=c(o("url",m,"")),this.app_version=o("app_version",m,"0.0"),this.country_code=o("country_code",m,null),this.city=o("city",m,null),this.ip_address=o("ip_address",m,null),this.ignore_bots=o("ignore_bots",m,!0),this.force_post=o("force_post",m,!1),this.remote_config=o("remote_config",m,!1),this.ignore_visitor=o("ignore_visitor",m,!1),this.require_consent=o("require_consent",m,!1),Array.isArray(ie)||(ie=[]),""===this.url&&(D("Please provide server URL"),this.ignore_visitor=!0),H("cly_ignore")&&(this.ignore_visitor=!0),z(),we?this.device_id||(this.device_id="[CLY]_temp_id"):this.device_id=o("device_id",m,B()),Z=H("cly_queue")||[],K=H("cly_event")||[],ee=H("cly_remote_configs")||{},C(),window.name&&0===window.name.indexOf("cly:"))try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(e){D("Could not parse name",window.name)}else if(location.hash&&0===location.hash.indexOf("#cly:"))try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(e){D("Could not parse hash",location.hash)}if((this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&W)&&this.passed_data.token&&this.passed_data.purpose&&(this.passed_data.token!==H("cly_old_token")&&(U(this.passed_data.token),H("cly_old_token",this.passed_data.token)),"heatmap"===this.passed_data.purpose&&(this.ignore_visitor=!0,b(),_(this.url+"/views/heatmap.js",w))),!this.ignore_visitor){if(D("Countly initialized"),location.search){for(var t=location.search.substring(1).split("&"),n={},i=!1,r=0;r<t.length;r++){var a=t[r].split("=");"cly_id"===a[0]?H("cly_cmp_id",a[1]):"cly_uid"===a[0]?H("cly_cmp_uid",a[1]):"cly_device_id"===a[0]?this.device_id=a[1]:0===(a[0]+"").indexOf("utm_")&&this.utm[a[0].replace("utm_","")]&&(n[a[0].replace("utm_","")]=a[1],i=!0)}if(i){for(var s in this.utm)n[s]?this.userData.set("utm_"+s,n[s]):this.userData.unset("utm_"+s);this.userData.save()}}we||this.device_id!==H("cly_id")&&H("cly_id",this.device_id),this.remote_config&&this.fetch_remote_config(this.remote_config),M(),setTimeout(q,1)}document.documentElement.setAttribute("data-countly-useragent",navigator.userAgent)},this.group_features=function(e){if(e)for(var t in e)Oe[t]?D("Feature name "+t+" is already reserved"):"string"==typeof e[t]?Oe[t]={features:[e[t]]}:e[t]&&Array.isArray(e[t])&&e[t].length?Oe[t]={features:e[t]}:D("Incorrect feature list for "+t+" value: "+e[t]);else D("Incorrect features: "+e)},this.check_consent=function(e){return!(this.require_consent&&(Oe[e]?!Oe[e]||!Oe[e].optin:(D("No feature available for "+e),1)))},this.check_any_consent=function(){if(!this.require_consent)return!0;for(var e in Oe)if(Oe[e]&&Oe[e].optin)return!0;return!1},this.add_consent=function(e){if(D("Adding consent for "+e),Array.isArray(e))for(var t=0;t<e.length;t++)this.add_consent(e[t]);else Oe[e]?Oe[e].features?(Oe[e].optin=!0,this.add_consent(Oe[e].features)):!0!==Oe[e].optin&&(ke[e]=!0,Oe[e].optin=!0,Ae(),setTimeout(function(){"sessions"===e&&Ee.begin_session?(Y.begin_session.apply(Y,Ee.begin_session),Ee.begin_session=null):"views"===e&&Ee.track_pageview&&(se=null,Y.track_pageview.apply(Y,Ee.track_pageview),Ee.track_pageview=null),Ee.change_id&&(Y.change_id.apply(Y,Ee.change_id),Ee.change_id=null)},1)):D("No feature available for "+e)},this.remove_consent=function(e){if(D("Removing consent for "+e),Array.isArray(e))for(var t=0;t<e.length;t++)this.remove_consent(e[t]);else Oe[e]?(Oe[e].features?this.remove_consent(Oe[e].features):!1!==Oe[e].optin&&(ke[e]=!1,Ae()),Oe[e].optin=!1):D("No feature available for "+e)};var Ie,Ae=function(){Ie&&(clearTimeout(Ie),Ie=null),Ie=setTimeout(function(){v(ke)&&(V({consent:JSON.stringify(ke)}),ke={})},1e3)};this.enable_offline_mode=function(){we=!0,this.device_id="[CLY]_temp_id"},this.disable_offline_mode=function(e){we=!1,e&&this.device_id!==e?(this.device_id=e,H("cly_id",this.device_id),D("Changing id")):(this.device_id=B(),this.device_id!==H("cly_id")&&H("cly_id",this.device_id));var t=!1;if(Z.length>0)for(var n=0;n<Z.length;n++)"[CLY]_temp_id"===Z[n].device_id&&(Z[n].device_id=this.device_id,t=!0);t&&H("cly_queue",Z,!0)},this.begin_session=function(e,t){if(this.check_consent("sessions")){if(!G){this.report_orientation(),S(window,"resize",function(){Y.report_orientation()}),J=i(),G=!0,oe=!e;var n=H("cly_session");if(t||!ye||!n||parseInt(n)<=i()){D("Session started");var r={};r.begin_session=1,r.metrics=JSON.stringify(j()),V(r)}H("cly_session",i()+60*_e)}}else Ee.begin_session=arguments},this.session_duration=function(e){this.check_consent("sessions")&&G&&(D("Session extended",e),V({session_duration:e}),N())},this.end_session=function(e,t){this.check_consent("sessions")&&G&&(e=e||i()-J,L(),!ye||t?(D("Ending session"),V({end_session:1,session_duration:e})):this.session_duration(e),G=!1)},this.change_id=function(e,t){if(this.device_id!==e){t||(K.length>0&&(V({events:JSON.stringify(K)}),H("cly_event",K=[])),this.end_session(null,!0),ne={});var n=this.device_id;this.device_id=e,H("cly_id",this.device_id),D("Changing id"),t?this.check_any_consent()?V({old_device_id:n}):Ee.change_id=arguments:this.begin_session(!oe,!0),this.remote_config&&(H("cly_remote_configs",ee={}),this.fetch_remote_config(this.remote_config))}},this.add_event=function(e){this.check_consent("events")&&O(e)},this.start_event=function(e){ne[e]?D("Timed event with key "+e+" already started"):ne[e]=i()},this.end_event=function(e){"string"==typeof e&&(e={key:e}),e.key?ne[e.key]?(e.dur=i()-ne[e.key],this.add_event(e),delete ne[e.key]):D("Timed event with key "+e.key+" was not started"):D("Event must have key property")},this.report_orientation=function(e){this.check_consent("users")&&O({key:"[CLY]_orientation",segmentation:{mode:e||p()}})},this.report_conversion=function(e,t){this.check_consent("attribution")&&(e=e||H("cly_cmp_id")||"cly_organic",t=t||H("cly_cmp_uid"),e&&t?V({campaign_id:e,campaign_user:t}):e&&V({campaign_id:e}))},this.user_details=function(e){if(this.check_consent("users")){D("Adding userdetails: ",e);var t=["name","username","email","organization","phone","picture","gender","byear","custom"];V({user_details:JSON.stringify(l(e,t))})}};var Ce={},Pe=function(e,t,n){Y.check_consent("users")&&(Ce[e]||(Ce[e]={}),"$push"===n||"$pull"===n||"$addToSet"===n?(Ce[e][n]||(Ce[e][n]=[]),Ce[e][n].push(t)):Ce[e][n]=t)};this.userData={set:function(e,t){Ce[e]=t},unset:function(e){Ce[e]=""},set_once:function(e,t){Pe(e,t,"$setOnce")},increment:function(e){Pe(e,1,"$inc")},increment_by:function(e,t){Pe(e,t,"$inc")},multiply:function(e,t){Pe(e,t,"$mul")},max:function(e,t){Pe(e,t,"$max")},min:function(e,t){Pe(e,t,"$min")},push:function(e,t){Pe(e,t,"$push")},push_unique:function(e,t){Pe(e,t,"$addToSet")},pull:function(e,t){Pe(e,t,"$pull")},save:function(){Y.check_consent("users")&&V({user_details:JSON.stringify({custom:Ce})}),Ce={}}},this.report_trace=function(e){if(this.check_consent("apm")){for(var t=["type","name","stz","etz","apm_metrics","apm_attr"],n=0;n<t.length;n++)if("apm_attr"!==t[n]&&void 0===e[t[n]])return void D("APM trace must have a",t[n]);var i=l(e,t);i.timestamp=e.stz;var r=new Date;i.hour=r.getHours(),i.dow=r.getDay(),V({apm:JSON.stringify(i)}),D("Adding APM trace: ",i)}},this.track_errors=function(t){e.i[this.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,re=t,window.onerror=function(e,t,n,i,r){if(void 0!==r)a(r,!1);else{i=i||window.event&&window.event.errorCharacter;var o="";void 0!==e&&(o+=e+"\n"),void 0!==t&&(o+="at "+t),void 0!==n&&(o+=":"+n),void 0!==i&&(o+=":"+i),o+="\n";try{for(var s=[],c=arguments.callee.caller;c;)s.push(c.name),c=c.caller;o+=s.join("\n")}catch(e){}a(o,!1)}},window.addEventListener("unhandledrejection",function(e){a(new Error("Unhandled rejection (reason: "+(e.reason&&e.reason.stack?e.reason.stack:e.reason)+")."),!0)}))},this.log_error=function(e,t){this.recordError(e,!0,t)},this.add_log=function(e){this.check_consent("crashes")&&(te.length>me&&te.shift(),te.push(e))},this.fetch_remote_config=function(e,t,n){if(this.check_consent("remote-config")){var i={method:"fetch_remote_config"};this.check_consent("sessions")&&(i.metrics=JSON.stringify(j())),e&&(n||"function"!=typeof e?Array.isArray(e)&&e.length&&(i.keys=JSON.stringify(e)):(n=e,e=null)),t&&(n||"function"!=typeof t?Array.isArray(t)&&t.length&&(i.omit_keys=JSON.stringify(t)):(n=t,t=null)),R(i),F(this.url+"/o/sdk",i,function(e,t,r){try{var o=JSON.parse(r);if(i.keys||i.omit_keys)for(var a in o)ee[a]=o[a];else ee=o;H("cly_remote_configs",ee)}catch(e){}"function"==typeof n&&n(e,ee)})}else D("Remote config requires explicit consent"),"function"==typeof n&&n(new Error("Remote config requires explicit consent"),ee)},this.get_remote_config=function(e){return void 0!==e?ee[e]:ee},this.stop_time=function(){Te&&(Te=!1,ae=i()-J,le=i()-ce)},this.start_time=function(){Te||(Te=!0,J=i()-ae,ce=i()-le,le=0,N())},this.track_sessions=function(){function e(){document[n]?Y.stop_time():Y.start_time()}function t(){fe>=he&&Y.start_time(),fe=0}this.begin_session(),this.start_time(),S(window,"beforeunload",function(){Y.end_session()}),S(window,"unload",function(){Y.end_session()});var n="hidden";n in document?document.addEventListener("visibilitychange",e):(n="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(n="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(n="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?(S(window,"focusin",function(){Y.start_time()}),S(window,"focusout",function(){Y.stop_time()})):(S(window,"focus",function(){Y.start_time()}),S(window,"blur",function(){Y.stop_time()}),S(window,"pageshow",function(){Y.start_time()}),S(window,"pagehide",function(){Y.stop_time()})),S(window,"mousemove",t),S(window,"click",t),S(window,"keydown",t),S(window,"scroll",t),setInterval(function(){++fe>=he&&Y.stop_time()},6e4)},this.track_pageview=function(e,t,n){if(L(),e&&Array.isArray(e)&&(t=e,e=null),e||(e=this.getViewName()),t&&t.length)for(var r=0;r<t.length;r++)try{if(new RegExp(t[r]).test(e))return void D("Ignored:",e)}catch(e){D("Problem with regex",t[r])}se=e,ce=i();var o={name:e,visit:1,domain:window.location.hostname,view:this.getViewUrl()};if(void 0!==document.referrer&&document.referrer.length){var a=T.exec(document.referrer);a&&a[11]&&a[11]!==window.location.hostname&&(o.start=1)}if(n)for(var s in n)void 0===o[s]&&(o[s]=n[s]);this.check_consent("views")?O({key:"[CLY]_view",segmentation:o}):Ee.track_pageview=arguments},this.track_view=function(e,t,n){this.track_pageview(e,t,n)},this.track_clicks=function(e){e=e||document;var t=!0;S(e,"click",function(e){if(t){if(t=!1,u(e),void 0!==e.pageX&&void 0!==e.pageY){var n=d(),i=h();Y.check_consent("clicks")&&O({key:"[CLY]_action",segmentation:{type:"click",x:e.pageX,y:e.pageY,width:i,height:n,domain:window.location.hostname,view:Y.getViewUrl()}})}setTimeout(function(){t=!0},1e3)}})},this.track_scrolls=function(e){function t(){if(n){n=!1;var e=d(),t=h(),r=f();Y.check_consent("scrolls")&&O({key:"[CLY]_action",segmentation:{type:"scroll",y:i+r,width:t,height:e,domain:window.location.hostname,view:Y.getViewUrl()}})}}e=e||window;var n=!0,i=0;S(e,"scroll",function(){i=Math.max(i,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)}),S(e,"beforeunload",t),S(e,"unload",t)},this.track_links=function(e){e=e||document,S(e,"click",function(e){var t=I(e).closest("a");t&&(u(e),Y.check_consent("clicks")&&O({key:"linkClick",segmentation:{href:t.href,text:t.innerText,id:t.id,view:Y.getViewUrl()}}))})},this.track_forms=function(e,n){function i(e){return e.name||e.id||e.type||e.nodeName}e=e||document,S(e,"submit",function(e){var r,o=I(e),a={id:o.attributes.id&&o.attributes.id.nodeValue,name:o.attributes.name&&o.attributes.name.nodeValue,action:o.attributes.action&&o.attributes.action.nodeValue,method:o.attributes.method&&o.attributes.method.nodeValue,view:Y.getViewUrl()};if(void 0!==o.elements){for(var s=0;s<o.elements.length;s++)(r=o.elements[s])&&"password"!==r.type&&-1===r.className.indexOf("cly_user_ignore")&&(void 0===a["input:"+i(r)]&&(a["input:"+i(r)]=[]),"select"===r.nodeName.toLowerCase()?void 0!==r.multiple?a["input:"+i(r)].push(t(r)):a["input:"+i(r)].push(r.options[r.selectedIndex].value):"input"===r.nodeName.toLowerCase()?void 0!==r.type?"checkbox"===r.type.toLowerCase()||"radio"===r.type.toLowerCase()?r.checked&&a["input:"+i(r)].push(r.value):("hidden"!==r.type.toLowerCase()||n)&&a["input:"+i(r)].push(r.value):a["input:"+i(r)].push(r.value):"textarea"===r.nodeName.toLowerCase()?a["input:"+i(r)].push(r.value):void 0!==r.value&&a["input:"+i(r)].push(r.value));for(var c in a)a[c]&&"function"==typeof a[c].join&&(a[c]=a[c].join(", "))}Y.check_consent("forms")&&O({key:"formSubmit",segmentation:a})})},this.collect_from_forms=function(e,n){e=e||document,S(e,"submit",function(i){var r,o=I(i),a={},s=!1;if(void 0!==o.elements){var c,l,u={},d=e.getElementsByTagName("LABEL");for(c=0;c<d.length;c++)d[c].htmlFor&&""!==d[c].htmlFor&&(u[d[c].htmlFor]=d[c].innerText||d[c].textContent||d[c].innerHTML);for(c=0;c<o.elements.length;c++)if((r=o.elements[c])&&"password"!==r.type&&-1===r.className.indexOf("cly_user_ignore")){var h="";if("select"===r.nodeName.toLowerCase()?h=void 0!==r.multiple?t(r):r.options[r.selectedIndex].value:"input"===r.nodeName.toLowerCase()?void 0===r.type||"checkbox"!==r.type.toLowerCase()&&"radio"!==r.type.toLowerCase()?h=r.value:r.checked&&(h=r.value):"textarea"===r.nodeName.toLowerCase()?h=r.value:void 0!==r.value&&(h=r.value),r.className&&-1!==r.className.indexOf("cly_user_")){var f=r.className.split(" ");for(l=0;l<f.length;l++)if(0===f[l].indexOf("cly_user_")){a[f[l].replace("cly_user_","")]=h,s=!0;break}}else r.type&&"email"===r.type.toLowerCase()||r.name&&-1!==r.name.toLowerCase().indexOf("email")||r.id&&-1!==r.id.toLowerCase().indexOf("email")||r.id&&u[r.id]&&-1!==u[r.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(h)?(a.email||(a.email=h),s=!0):r.name&&-1!==r.name.toLowerCase().indexOf("username")||r.id&&-1!==r.id.toLowerCase().indexOf("username")||r.id&&u[r.id]&&-1!==u[r.id].toLowerCase().indexOf("username")?(a.username||(a.username=h),s=!0):r.name&&(-1!==r.name.toLowerCase().indexOf("tel")||-1!==r.name.toLowerCase().indexOf("phone")||-1!==r.name.toLowerCase().indexOf("number"))||r.id&&(-1!==r.id.toLowerCase().indexOf("tel")||-1!==r.id.toLowerCase().indexOf("phone")||-1!==r.id.toLowerCase().indexOf("number"))||r.id&&u[r.id]&&(-1!==u[r.id].toLowerCase().indexOf("tel")||-1!==u[r.id].toLowerCase().indexOf("phone")||-1!==u[r.id].toLowerCase().indexOf("number"))?(a.phone||(a.phone=h),s=!0):r.name&&(-1!==r.name.toLowerCase().indexOf("org")||-1!==r.name.toLowerCase().indexOf("company"))||r.id&&(-1!==r.id.toLowerCase().indexOf("org")||-1!==r.id.toLowerCase().indexOf("company"))||r.id&&u[r.id]&&(-1!==u[r.id].toLowerCase().indexOf("org")||-1!==u[r.id].toLowerCase().indexOf("company"))?(a.organization||(a.organization=h),s=!0):(r.name&&-1!==r.name.toLowerCase().indexOf("name")||r.id&&-1!==r.id.toLowerCase().indexOf("name")||r.id&&u[r.id]&&-1!==u[r.id].toLowerCase().indexOf("name"))&&(a.name||(a.name=""),a.name+=h+" ",s=!0)}}s&&(D("Gathered user data",a),n?Y.user_details({custom:a}):Y.user_details(a))})},this.collect_from_facebook=function(e){FB&&FB.api&&FB.api("/me",function(t){var n={};if(t.name&&(n.name=t.name),t.email&&(n.email=t.email),"male"===t.gender?n.gender="M":"female"===t.gender&&(n.gender="F"),t.birthday){var i=t.birthday.split("/").pop();i&&4===i.length&&(n.byear=i)}if(t.work&&t.work[0]&&t.work[0].employer&&t.work[0].employer.name&&(n.organization=t.work[0].employer.name),e){n.custom={};for(var r in e){for(var o=e[r].split("."),a=t,s=0;s<o.length&&void 0!==(a=a[o[s]]);s++);void 0!==a&&(n.custom[r]=a)}}Y.user_details(n)})},this.opt_out=function(){this.ignore_visitor=!0,H("cly_ignore",!0)},this.opt_in=function(){H("cly_ignore",!1),this.ignore_visitor=!1,C(),this.ignore_visitor||be||q()},this.report_feedback=function(e){if(this.check_consent("star-rating")||this.check_consent("feedback")){if(!e.widget_id)return void D("Feedback must contain widget_id property");if(!e.rating)return void D("Feedback must contain rating property");if(this.check_consent("events")){var t=["widget_id","contactMe","platform","app_version","rating","email","comment"],n={key:"[CLY]_star_rating",count:1,segmentation:{}};n.segmentation=l(e,t),n.segmentation.app_version||(n.segmentation.app_version=this.metrics._app_version||this.app_version),D("Reporting feedback: ",n),this.add_event(n)}}},this.show_feedback_popup=function(e){(this.check_consent("star-rating")||this.check_consent("feedback"))&&(we?D("Cannot show feedback popup in offline mode"):F(this.url+"/o/feedback/widget",{widget_id:e},function(e,t,n){e&&D("Error occurred",e);try{P(JSON.parse(n),!1)}catch(e){D("JSON parse failed: "+e)}}))},this.initialize_feedback_popups=function(e){if(this.check_consent("star-rating")||this.check_consent("feedback")){e||(e=H("cly_fb_widgets"));for(var t=document.getElementsByClassName("countly-feedback-sticker");t.length>0;)t[0].remove();F(this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(e)},function(e,t,n){if(e)D("Errors occurred:",e);else try{for(var i=JSON.parse(n),r=0;r<i.length;r++)if("true"===i[r].is_active&&i[r].target_devices[A.device])if("string"==typeof i[r].hide_sticker&&(i[r].hide_sticker="true"===i[r].hide_sticker),"all"!==i[r].target_page||i[r].hide_sticker)for(var o=i[r].target_pages,a=0;a<o.length;a++){var s=o[a].substr(0,o[a].length-1)===window.location.pathname.substr(0,o[a].length-1),c=o[a]===window.location.pathname;(o[a].includes("*")&&s||c)&&!i[r].hide_sticker&&P(i[r],!0)}else P(i[r],!0)}catch(e){D("JSON parse error: "+e)}})}},this.enable_feedback=function(e){if(this.check_consent("star-rating")||this.check_consent("feedback"))if(we)D("Cannot enable feedback in offline mode");else{H("cly_fb_widgets",e.popups||e.widgets),g(this.url+"/star-rating/stylesheets/countly-feedback-web.css");var t=e.popups||e.widgets;t.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initialize_feedback_popups(t)):D("You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}},this.get_available_feedback_widgets=function(e){this.check_consent("star-rating")||this.check_consent("feedback")?we?D("Cannot enable feedback in offline mode."):F(this.url+"/o/sdk",{method:"feedback",device_id:this.device_id,app_key:this.app_key},function(t,n,i){if(t)return D("Error occured while fetching feedbacks",t),void(e&&e(null,t));try{var r=JSON.parse(i).result||[];return void(e&&e(r,null))}catch(t){return D("Error while processing feedbacks",t),void(e&&e(null,t))}}):e&&e(null,new Error("Consent for feedback not provided."))},this.present_feedback_widget=function(t){function n(e){document.getElementById("countly-surveys-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block"}if(this.check_consent("star-rating")||this.check_consent("feedback"))if(t&&"object"===(void 0===t?"undefined":y(t))&&!Array.isArray(t))try{var i=this.url;if("nps"===t.type)i+="/feedback/nps";else{if("survey"!==t.type)return void D("Feedback widget only accepts nps and survey types.");i+="/feedback/survey"}i+="?widget_id="+t._id,i+="&app_key="+this.app_key,i+="&device_id="+this.device_id,i+="&sdk_name="+E,i+="&platform="+this.platform,i+="&app_version="+this.app_version,i+="&sdk_version="+k,i+="&origin="+window.origin,i+="&widget_v=web";var r=document.createElement("iframe");r.name="countly-surveys-iframe",r.id="countly-surveys-iframe",r.src=i;var o=!1;r.onload=function(){o&&(document.getElementById("countly-surveys-wrapper-"+t._id).style.display="none",document.getElementById("csbg").style.display="none"),o=!0},g(this.url+"/surveys/stylesheets/countly-surveys.css");for(var a=document.getElementById("csbg");a;)a.remove(),a=document.getElementById("csbg");for(var s=document.getElementsByClassName("countly-surveys-wrapper"),c=0;c<s.length;c++)s[c].remove();if(document.body.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),s=document.createElement("div"),s.className="countly-surveys-wrapper",s.id="countly-surveys-wrapper-"+t._id,"survey"===t.type&&(s.className=s.className+" "+t.appearance.position),document.body.appendChild(s),s.appendChild(r),S(window,"message",function(n){var i={};try{i=JSON.parse(n.data)}catch(e){D("Error while parsing message body "+e)}n.origin===e.url&&i.close&&(document.getElementById("countly-surveys-wrapper-"+t._id).style.display="none",document.getElementById("csbg").style.display="none")}),"survey"===t.type){var l=!1;switch(t.showPolicy){case"afterPageLoad":"complete"===document.readyState?l||(l=!0,n(t)):S(document,"readystatechange",function(e){"complete"===e.target.readyState&&(l||(l=!0,n(t)))});break;case"afterConstantDelay":setTimeout(function(){l||(l=!0,n(t))},1e4);break;case"onAbandon":"complete"===document.readyState?S(document,"mouseleave",function(){l||(l=!0,n(t))}):S(document,"readystatechange",function(e){"complete"===e.target.readyState&&S(document,"mouseleave",function(){l||(l=!0,n(t))})});break;case"onScrollHalfwayDown":S(window,"scroll",function(){l||Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)>=d()/2&&(l=!0,n(t))});break;default:l||(l=!0,n(t))}}else"nps"===t.type&&(document.getElementById("countly-surveys-wrapper-"+t._id).style.display="block",document.getElementById("csbg").style.display="block")}catch(e){D("Somethings went wrong while presenting the feedback",e)}else D("Please provide atleast one feedback widget object.")},this.recordError=function(e,t,n){if(this.check_consent("crashes")&&e){n=n||re;var r="";"object"===(void 0===e?"undefined":y(e))?void 0!==e.stack?r=e.stack:(void 0!==e.name&&(r+=e.name+":"),void 0!==e.message&&(r+=e.message+"\n"),void 0!==e.fileName&&(r+="in "+e.fileName+"\n"),void 0!==e.lineNumber&&(r+="on "+e.lineNumber),void 0!==e.columnNumber&&(r+=":"+e.columnNumber)):r=e+"",t=!!t;var o=j(),a={_resolution:o._resolution,_error:r,_app_version:o._app_version,_run:i()-xe};a._not_os_specific=!0,a._javascript=!0;var s=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;s&&(a._bat=Math.floor(100*s.level)),void 0!==navigator.onLine&&(a._online=!!navigator.onLine),a._background=!document.hasFocus(),te.length>0&&(a._logs=te.join("\n")),te=[],a._nonfatal=t,a._view=this.getViewName(),void 0!==n&&(a._custom=n);try{var c=document.createElement("canvas").getContext("experimental-webgl");a._opengl=c.getParameter(c.VERSION)}catch(e){}V({crash:JSON.stringify(a)})}},this.onStorageChange=function(e,t){switch(e){case"cly_queue":Z=Y.deserialize(t||"[]");break;case"cly_event":K=Y.deserialize(t||"[]");break;case"cly_remote_configs":ee=Y.deserialize(t||"{}");break;case"cly_ignore":Y.ignore_visitor=Y.deserialize(t);break;case"cly_id":Y.device_id=Y.deserialize(t)}},this._internals={store:H,getDocWidth:h,getDocHeight:d,getViewportHeight:f,get_page_coord:u,get_event_target:I,add_event:S,getProperties:l,stripTrailingSlash:c,prepareParams:s,sendXmlHttpRequest:F,getMsTimestamp:r,getTimestamp:i,log:D,getMetrics:j,generateUUID:n,isUUID:function(){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(Y.device_id)},getId:B,heartBeat:q,toRequestQueue:V,reportViewDuration:L,loadJS:_,loadCSS:g,getLastView:function(){return se},setToken:U,getToken:function(){var e=H("cly_token");return H("cly_token",null),e},showLoader:b,hideLoader:w,add_cly_events:O,detect_device:A,getRequestQueue:function(){return Z},getEventQueue:function(){return K},clearQueue:function(){Z=[],H("cly_queue",[]),K=[],H("cly_event",[])}},this.initialize()},e.init=function(t){var n=(t=t||{}).app_key||e.app_key;if(!e.i||!e.i[n]){var i=new e.CountlyClass(t);if(!e.i){e.i={};for(var r in i)e[r]=i[r]}e.i[n]=i}return e.i[n]};var O=0;Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;for(e=e.toUpperCase();t;){if(t.nodeName.toUpperCase()===e)return t;t=t.parentElement}});var S=function(e,t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},I=function(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement},A=function(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t&&(e=(t+"").toLowerCase()),/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)?"tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(e)?"phone":"desktop"};return{device:t(),detect:t,isMobile:"desktop"!==t(),userAgent:e}}();return window.addEventListener("storage",function(t){var n=(t.key+"").split("/"),i=n.pop(),r=n.pop();e.i&&e.i[r]&&e.i[r].onStorageChange(i,t.newValue)}),e.serialize=function(e){return"object"===(void 0===e?"undefined":y(e))&&(e=JSON.stringify(e)),e},e.deserialize=function(e){try{e=JSON.parse(e)}catch(e){}return e},e.getViewName=function(){return window.location.pathname},e.getViewUrl=function(){return window.location.pathname},e});var B=window.Countly||{},j=new(function(){function e(){_(this,e),this._stopTracking=!1}return g(e,[{key:"initCountly",value:function(e,t,n){var i=n.options().params,r={q:B.q||[],debug:!1,app_key:t,url:e||"http://videoplayback.sohatv.vn",queue_size:50,interval:3e3,namespace:i.file||i.v||i.vid||n.src()};B.init(r),B.track_clicks(document.getElementById(n.id_)),B.track_scrolls(document.getElementById(n.id_)),B.track_sessions(),B.track_errors()}},{key:"stopTracking",value:function(){this._stopTracking=!0}},{key:"push",value:function(e,t){this._stopTracking||B.q.push(["add_event",{key:e,segmentation:t}])}},{key:"uuid",value:function(){return B.device_id}}]),e}()),D=t.playerconfig.DEFAULT,F=function(e){function n(e){_(this,n);var t=k(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.waitTrack=[];var o=t;t.lastTime=(new Date).getTime().toString();var a=t.props,s=a.player,c=a.defaultParams,l=s.options().params;l.file&&l.file.indexOf("ovp.sohatv.vn")>0&&(l.file=m("v",l.file));var u=window.navigator.platform,d=(new Date).getTime().toString(),f=l.pid||h(),p=void 0;localStorage.getItem("userId_vcplayer")?p=localStorage.getItem("userId_vcplayer"):(p=h(),localStorage.setItem("userId_vcplayer",p)),t.state={params:b({uuid:j.uuid(),appkey:v(s),apptype:"web",pid:f,ctime:d,platform:u,package:"com.vcc.webplayer",transfer_data:0,userId:p,tech:"html5"},c)},t.isFirstPlay=!1,t.updatePDU=t.updatePDU.bind(t),t.track=t.track.bind(t),t._handleLoadedmetadata=t._handleLoadedmetadata.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t._handleLastBitrate=t._handleLastBitrate.bind(t),t._handleReplay=t._handleReplay.bind(t),t._trackingLoadData=t._trackingLoadData.bind(t),t._handlePrepareTrack=t._handlePrepareTrack.bind(t),t._handlePause=t._handlePause.bind(t),t._handleOnNoti=t._handleOnNoti.bind(t),t._handleFirstPlay=t._handleFirstPlay.bind(t),t.trackInitPlayer(),s.one("loadedmetadata",t._trackingLoadData),s.one("ready",t._handlePrepareTrack),s.on("pause",t._handlePause),s.on("loadedmetadata",t._handleLoadedmetadata),s.one("play",function(){s.on("timeupdate",o._handleTimeUpdate)}),s.one("player:firstPlay",t._handleFirstPlay),s.on(D.EVENT.PLAYER_ENDED_CONTEND,function(){s.off("play",o._handleReplay),s.on("play",o._handleReplay)}),s.on("hlsTechInit",function(e,t){o.state.params.tech="hls",i(s,o.track,t)}),s.on("dashTechInit",function(e,t){o.state.params.tech="dash",r(s,o.track,t)}),x(s,t.track),I(s,t.track),M(s,t.track);var y=0,g=0,w=null;return s.on("timeupdate",function(){y=g,g=s.currentTime()}),s.on("seeking",function(){null===w&&(w=y)}),s.on("seeked",function(){o._handleSeek(w,g),w=null}),s.on(D.EVENT.PLAYER_NOTI,t._handleOnNoti),t}return w(n,e),g(n,[{key:"getDefaultProps",value:function(){return{track_url:"//lg1.logging.admicro.vn/video_track?",defaultParams:{}}}}]),g(n,[{key:"_handleFirstPlay",value:function(e,t){var n=this.state.params,i={state:t.isClick?"play":"autoplay",name:"vtlplayvideo"},r=b({},n,i);j.push("vtlplayvideo",r)}},{key:"_handleOnNoti",value:function(e,t){200===t.code&&this.stopTracking()}},{key:"stopTracking",value:function(){j.stopTracking()}},{key:"_handleSeek",value:function(e,t){var n=this.state.params,i={state:"seeking",startp:e.toFixed(2),seekp:t.toFixed(2),name:"vtlplayvideo"},r=b({},n,i);j.push("vtlplayvideo",r)}},{key:"_handlePause",value:function(){if(!this.props.player.vastAd){var e=this.state.params,t=b({},e,{state:"pause",startp:"",seekp:"",name:"vtlplayvideo"});j.push("vtlplayvideo",t)}}},{key:"_handlePrepareTrack",value:function(){var e=this.state.params,n=this.props,i=n.ref,r=n.player;e.ctime=(new Date).getTime().toString();var o="";for(var a in t.agent)!0===t.agent[a]&&(o=o.concat(" "+a));var s=o+" "+t.agent.version,c=i?decodeURIComponent(i):document.referrer?document.referrer:location.href,l=document.location.href;/adminplayer\.sohatv\.vn/.test(l)&&(l=c),window.top!=window.self&&(l=c);var u=l.match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/),d="-1";u&&u.length&&(d=u[2]),r.options().params.live&&(c+="&vid="+r.options().params.v),e.path=u[3],e.dmn=d,e.device=s,e.ref=c}},{key:"_trackingLoadData",value:function(){var e=this.props.player,t=this.state.params;t.vid=e.options_.params.file||e.options_.params.vid||e.options_.params.v||e.src(),t.ptype=e.tech_.isLive()?"live":"vod",t.sesid=q(j.uuid()+"|"+t.vid+"|"+(new Date).getTime().toString());var n=b({},t,{state:"load data",name:"vtlplayvideo"});j.push("vtlplayvideo",n)}},{key:"trackInitPlayer",value:function(){var e=this.state.params,t=b({},e,{error:"",authtime:"",name:"vtlinitplayer"});j.push("vtlinitplayer",t)}},{key:"_handleReplay",value:function(){var e=this.state.params,t=b({},e,{state:"replay",startp:"",seekp:"",name:"vtlinitplayer"});j.push("vtlinitplayer",t)}},{key:"updatePDU",value:function(e){this.state.params.pdu=e}},{key:"_trackWaitEvent",value:function(){for(var e=this.waitTrack;e.length;){var t=e.shift();this.track(t)}}},{key:"track",value:function(e){var t="vtlplayvideo",n=this.state.params;if("vtlplayvideoads"===e.name&&(t="vtlplayvideoads"),"vtlplayvideoerror"!==e.name||(e.state="loading",t="vtlplayvideoerror",this.lastTime!==n.ctime)){this.lastTime=n.ctime;var i=b({},n,e);j.push(t,i)}}},{key:"_handleLoadedmetadata",value:function(){var e=this.props.player,t=this.state.params,n=e.duration();n>0&&n!==1/0&&(t.vdu=n.toFixed(2)),this.tech_&&this.tech_.off(D.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate),this.tech_=e.tech_,this.tech_.on(D.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player;if(!e.vastAd){var t=void 0;try{t=e.tech_.el_.videoHeight}catch(e){return}this.state.last_video_height!==t&&this.setState({last_video_height:t});var n=this.state.params;n.ctime=(new Date).getTime().toString(),n.quanlity=this.currentQuality()+"p",n.ptime=e.currentTime().toFixed(2)}}},{key:"currentQuality",value:function(){var e=this.state.last_video_height;return e>=1080?1080:e>=720?720:e>=480?480:e>=360?360:e>=240?240:144}},{key:"_handleLastBitrate",value:function(e,t){var n=t.data,i=this.state.params,r=Math.round(8*n.stats.total/(n.stats.tbuffered-n.stats.trequest));i.bw=r}}]),n}(t.Plugin);d.registerPlugin("countlyTrackingPlugin",function(e){var t=this,n=t.options().params,i=n.logEndpoint||e.url,r=n.logId||e.logid;i&&r&&(r=r||"5d42ada552b89e69c4e23b7d",j.initCountly(i,r,t),new F(b({},e,{player:t})))})})}();